{"version":3,"file":"bundle.js","sources":["../src/Config.js","../src/Data.js","../src/Tooltip.js","../src/Simulation.js","../src/Layout.js","../src/Draw.js","../src/models/MapChart.js","../src/models/PackChart.js","../src/main.js","../src/Language.js"],"sourcesContent":["// set the dimensions and margins of the graph\nexport const margin = { top: 100, left: 100, bottom: 50, right: 100 },\n    width = window.innerWidth - margin.left - margin.right,\n    height = window.innerHeight - margin.top - margin.bottom,\n    svg_width = width + margin.left + margin.right,\n    svg_height = height + margin.top + margin.bottom;\n\nexport const projection = d3.geoAlbers()\n    .center([24.7731, 45.7909])\n    .rotate([-14, 3.3, -10])\n    .parallels([37, 54])\n    .scale(5000)\n    .translate([svg_width / 2, svg_height / 2]);\n\nexport const path = d3.geoPath()\n    .projection(projection);\n\nconst locale = d3.timeFormatLocale({\n    'dateTime': '%A, %e %B %Y г. %X',\n    'date': '%d.%m.%Y',\n    'time': '%H:%M:%S',\n    'periods': ['AM', 'PM'],\n    'days': ['Luni', 'Marți', 'Miercuri', 'Joi', 'Vineri', 'Sâmbătă', 'Duminică'],\n    'shortDays': ['Lu', 'Ma', 'Mi', 'Jo', 'Vi', 'Sa', 'Du'],\n    'months': ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'],\n    'shortMonths': ['Ian', 'Feb', 'Mart', 'Apr', 'Mai', 'Iun', 'Iul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec']\n});\n\nconst formatMillisecond = locale.format('.%L'),\n    formatSecond = locale.format(':%S'),\n    formatMinute = locale.format('%I:%M'),\n    formatHour = locale.format('%I %p'),\n    formatDay = locale.format('%a %d'),\n    formatWeek = locale.format('%b %d'),\n    formatMonth = locale.format('%B'),\n    formatYear = locale.format('%Y');\n\nexport const multiFormat = (date) => {\n    return (d3.timeSecond(date) < date ? formatMillisecond\n    : d3.timeMinute(date) < date ? formatSecond\n    : d3.timeHour(date) < date ? formatMinute\n    : d3.timeDay(date) < date ? formatHour\n    : d3.timeMonth(date) < date ? (d3.timeWeek(date) < date ? formatDay : formatWeek)\n    : d3.timeYear(date) < date ? formatMonth\n    : formatYear)(date);\n}","export const formatNodes = (nodes, countiesCentroids) => {\n    let parseTime = d3.timeParse('%d-%m-%Y');\n    let formattedData = [];\n\n    let idToTargetNodes = idToTargetNodesFnc(nodes);\n    let rScale = d3.scaleLinear()\n        .domain([0,d3.max(Object.values(idToTargetNodes))])\n        .range([5,25])\n\n    nodes.forEach( d => {\n        if (d.properties !== undefined) {\n            d.latitude = countiesCentroids.get(d.properties.county) && countiesCentroids.get(d.properties.county).lat;\n            d.longitude = countiesCentroids.get(d.properties.county) && countiesCentroids.get(d.properties.county).lon;\n            d.date = parseTime(d.properties.diagnostic_date).getTime();\n            d.name = +d.name;\n            d.infected_persons = (idToTargetNodes[d.properties.case_no] + 1) || 1;\n            d.r = rScale(d.infected_persons);\n        } else {\n            d.r = 3;\n        };\n    });\n    nodes.sort((a,b) => a.date - b.date);\n\n    var ed_data = d3.nest()\n        .key(d => d.properties && d.properties.diagnostic_date)\n        .entries(nodes);\n    ed_data.forEach(key => {\n        let valuesArr = [...key['values'] ].sort((a,b) => a.name - b.name);\n        let valuesPerDay = valuesArr.map(d => {\n                d.dayOrder = valuesArr.indexOf(d) + 1;\n                return d;\n            });\n        formattedData.push(...valuesPerDay)\n    });\n\n    return formattedData;\n};\n\nexport const idToNodeFnc = (graph) => {\n    let dict = {};\n    graph.nodes.forEach(n => dict[n.name] = n);\n    return dict;\n};\n\nexport const idToTargetNodesFnc = (nodes) => {\n    return d3.nest()\n        .key(d => d.properties && d.properties.source_no)\n        .rollup(v => v.length)\n        .object(nodes); // returns a nested object\n};\n","import * as Config from './Config';\nimport * as Language from './Language';\n\n// use a tooltip to show node info\nexport const tooltip_div = d3.select('body')\n   .append('tooltip_div')\n   .attr('class', 'tooltip')\n   .style('opacity', 0)\n   .style('display', 'none');\n\nexport const highlight = (d, cases) => {\n    let positioning = d3.select('#positioning').node().value;\n\n    if (positioning === 'clusters') {\n        return;\n    };\n\n    let left = d3.event.pageX -20;\n    let top = d3.event.pageY + 20;\n \n    let caseId = d.name;\n\n    if (window.innerWidth - left < 150){\n        left = d3.event.pageX - 40;\n    }\n \n    d3.selectAll('.nodes')\n        .attr('r', d => d.r)\n        .style('opacity', 0.3);\n    d3.selectAll('.links')\n        .style('stroke', '#999')\n        .style('opacity', 0.3);\n    d3.selectAll('.node-labels > text')\n        .style('opacity', 0.3);\n\n    tooltip_div.transition()\n        .duration(200)\n        .style('opacity', .9);\n\n    d3.select('#CO-' + caseId)\n        .attr('r', d => 2 * d.r)\n        .style('opacity', 1);\n    d3.selectAll('.CO-labels-self-' + caseId)\n        .style('opacity', '1');\n    d3.selectAll('.CO-links-' + caseId)\n        .style('stroke', 'firebrick')\n        .transition()\n            .duration(200)\n            .attr('stroke-dashoffset', 0)\n            .style('opacity', 1)\n            .on('end', (d, i) => {\n                if (i === 0) {\n                    d3.selectAll('.CO-nodes-' + caseId)\n                        .style('opacity', '1');\n                    d3.selectAll('.CO-labels-' + caseId)\n                        .style('opacity', '1');\n                };\n            });\n\n    // adjust the text on the range slider\n    let name = cases.indexOf(caseId);\n    d3.select('#nRadius-value').text(caseId);\n    d3.select('#nRadius').property('value', name);\n\n    tooltip_div.html(tooltipHTML(d))\n        .style('left', left + 'px')\n        .style('top', top + 'px')\n        .style('display', null);\n};\n\nexport const tooltipHTML = (d) => {\n    if (d.properties !== undefined) {\n        let language = d3.select('#language').node().value;\n\n        let labels = {\n            cazulLabel: { 'ro': 'Cazul', 'en': 'Case' },\n            maleLabel: { 'ro': 'Bărbat', 'en': 'Male' },\n            femaleLabel: { 'ro': 'Femeie', 'en': 'Female' },\n            unspecLabel: { 'ro': 'Gen nespecificat', 'en': 'Unspecified gender' },\n            statusLabel: { 'ro': 'Stare', 'en': 'Status' },\n            releasedLabel: { 'ro': 'vindecat', 'en': 'released' },\n            confirmedLabel: { 'ro': 'confirmat', 'en': 'confirmed' },\n            deceasedLabel: { 'ro': 'deces', 'en': 'deceased' },\n            confdateLabel: { 'ro': 'Data confirmării', 'en': 'Confirmation date' },\n            recoverydateLabel: { 'ro': 'Data recuperării', 'en': 'Recovery date' },\n            infectionCountryLabel: { 'ro': 'Țara de infectare', 'en': 'Country of infection' },\n            detailsLabel: { 'ro': 'Detalii', 'en': 'Details' },\n            aiciLabel: { 'ro': 'aici', 'en': 'here' },\n        };\n\n        let genderInfo = d.properties.gender === 'Bărbat'\n                ? labels.maleLabel[language]\n                : (d.properties.gender === 'Femeie'\n                    ? labels.femaleLabel[language]\n                    : labels.unspecLabel[language]),\n            ageInfo = d.properties.age != null && d.properties.age != 0\n                ? (', ' + d.properties.age)\n                : '',\n            countyInfo = d.properties.county != null && d.properties.county != ''\n                ? (', ' + d.properties.county)\n                : '',\n            statusInfo = d.properties.status != null\n                ? (labels.statusLabel[language] + ': ' + (d.properties.status === 'Vindecat'\n                        ? labels.releasedLabel[language]\n                        : (d.properties.status === 'Confirmat'\n                            ? labels.confirmedLabel[language]\n                            : labels.deceasedLabel[language])) + '.<br />')\n                : '',\n            diagnosticDateInfo = d.properties.diagnostic_date !== null\n                ? (labels.confdateLabel[language] + ': ' + d.properties.diagnostic_date + '.<br />')\n                : '',\n            healingDateInfo = d.properties.healing_date !== null\n                ? (labels.recoverydateLabel[language] + ': ' + d.properties.healing_date + '.<br />')\n                : '',\n            countyOfInfectionInfo = d.properties.country_of_infection !== null \n                                    && d.properties.country_of_infection !== 'România'\n                                    && d.properties.country_of_infection !== 'Romania'\n                ? (labels.infectionCountryLabel[language] + ': ' + d.properties.country_of_infection + '.<br />')\n                : '',\n            referenceInfo = d.properties.reference !== null && d.properties.reference !== ''\n                ? (labels.detailsLabel[language] + ': ' + '<a href=\"' + d.properties.reference + '\" target= \"_blank\">'+ labels.aiciLabel[language] +'</a>')\n                : '';\n\n        return '<b>' + labels.cazulLabel[language] + ' ' + d.properties.case_no + '</b>' +\n            // genderInfo + ageInfo +\n            countyInfo + '.<br />' +\n            statusInfo +\n            diagnosticDateInfo +\n            healingDateInfo +\n            countyOfInfectionInfo +\n            referenceInfo\n        ;\n    } else {\n        return d.name;\n    };\n};\n\nexport const unHighlight = () => {\n    d3.selectAll('.nodes')\n        .style('opacity', 1);\n    d3.selectAll('.link')\n        .style('opacity', 1);\n    d3.selectAll('.node-labels > text')\n        .style('opacity', '1');\n};\n\nexport const hideTooltip = () => {\n    d3.selectAll('.nodes')\n        .attr('r', d => d.r)\n    tooltip_div.transition()\n        .duration(200)\n        .style('opacity', 0);\n};\n\nexport const highlightSearchedId = (caseId) => {\n    d3.select('#CO-' + caseId)\n        .dispatch('mouseover');\n        // .dispatch('click');\n};\n\nexport const toggleInfo = (infoStatus, language) => {\n    if (infoStatus === true) {\n        tooltip_div.transition()\n            .duration(200)\n            .style('opacity', .9);\n        tooltip_div.html(Language.infoHtml(language))\n            .style('left', Config.svg_width / 2 + 'px')\n            .style('top', Config.svg_height / 2 + 'px')\n            .style('display', null);\n        infoStatus = false;\n    } else {\n        tooltip_div.transition()\n            .duration(200)\n            .style('opacity', 0);\n        infoStatus = true;\n    }\n\n    return infoStatus;\n};\n\nexport const hovered = (hover) => {\n    return (d) => {\n        d3.selectAll(d.ancestors().map(d => d.node)).classed('node--hover', hover);\n    };\n};\n","import * as Config from './Config';\n\nexport const graphSimulation = (graph) => {\n    return d3.forceSimulation(graph.nodes)\n        .force('link', d3.forceLink(graph.links).id( d => d.name))\n        .force('center', d3.forceCenter(Config.svg_width / 2, Config.svg_height / 2))\n        .force('charge', d3.forceManyBody())\n        // .force('collision', d3.forceCollide().radius(d => d.radius))\n        .force('x', d3.forceX())\n        .force('y', d3.forceY())\n        .alphaDecay([0.02]);\n};\n\nexport const packSimulation = () => {\n    return d3.forceSimulation()\n    .force('collision', d3.forceCollide()\n        .radius(d => d.radius )\n        .strength(0.01))\n    .force('attract', d3.forceAttract()\n        .target(d => [d.foc_x, d.foc_y])\n        .strength(0.5));\n}\n\n// simulation drag - not used for now\nexport const drag = (simulation, positioning) => {\n    const dragstarted = d => {\n        if (positioning !== 'diagram') { return };\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n    }\n\n    const dragged = d => {\n        if (positioning !== 'diagram') { return };\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n    }\n\n    const dragended = d => {\n        if (positioning !== 'diagram') { return };\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n    }\n\n    return d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended);\n};\n\n// simulation link\nexport const linkArc = (d) => {\n    const r = Math.hypot(d.target.x - d.source.x, d.target.y - d.source.y);\n    return `\n        M${d.source.x},${d.source.y}\n        A${r},${r} 0 0,1 ${d.target.x},${d.target.y}\n    `;\n};\n\nexport const update = (idToNode, nodes, links, labels, positioning, xScale, yScale) => {\n\n    links.attr('d', d => {\n        if (positioning === 'arcs') {\n            if (typeof(d.source.name) === 'string') {\n                return linkArc(d)\n            } else {\n                let start = xScale(idToNode[d.source.name].date) || 0;\n                let end = xScale(idToNode[d.target.name].date);\n                const arcPath = ['M', start, yScale(idToNode[d.source.name].dayOrder), 'A', (start - end)/2, ',', (start-end)/2, 0,0,',',\n                            start < end ? 1: 0, end, yScale(idToNode[d.target.name].dayOrder)].join(' ');\n                return arcPath;\n            }\n        } else {\n            return linkArc(d)\n        }\n    });\n    nodes.attr('transform', d => `translate(${d.x},${d.y})`);\n    labels.attr('transform', d => `translate(${d.x},${d.y})`);\n};\n","import * as Config from './Config';\nimport * as Simulation from './Simulation';\n\nexport const statusColor = (language) => {\n    return language === 'ro'\n        ? d3.scaleOrdinal(['var(--main-confirmate)', 'var(--main-recuperari)', 'var(--main-decese)']).domain(['Confirmat', 'Vindecat', 'Decedat'])\n        : d3.scaleOrdinal(['var(--main-confirmate)', 'var(--main-recuperari)', 'var(--main-decese)']).domain(['Confirmed', 'Discharged', 'Deceased']);\n};\n\n// https://medialab.github.io/iwanthue/\n// hcl[0]>=0 && hcl[0]<=340\n//     && hcl[1]>=30 && hcl[1]<=80\n//     && hcl[2]>=35 && hcl[2]<=100\nconst countyColors = [\n    '#e4588c', '#35d394', '#ba1ea8', '#4caf1c', '#1848ca', '#aad42b', '#9b85ff', '#068400', '#8b2487', '#97ff8b', '#d60042', '#00ae87', '#f94740', '#48d3ff', '#d17300', '#5ea2ff', '#cfb100', '#53498f', '#ffe353', '#325383', '#86a700', '#ff9eeb', '#007f30', '#d9b6ff', '#3b5c12', '#89c2ff', '#964000', '#00bfbb', '#ff6f54', '#01aac6', '#ffb65d', '#008857', '#ff8e90', '#145f36', '#952e31', '#fffea6', '#8e3440', '#5a936f', '#883d0c', '#ffaf81', '#34a6c2', '#b09764', '#458a18'\n];\nconst counties = [\n    'ALBA', 'ARAD', 'ARGEȘ', 'BACĂU', 'BIHOR', 'BISTRIȚA-NĂSĂUD', 'BOTOȘANI', 'BRAȘOV', 'BRĂILA', 'BUCUREȘTI', 'BUZĂU', 'CARAȘ-SEVERIN', 'CLUJ', 'CONSTANȚA', 'COVASNA', 'CĂLĂRAȘI', 'DOLJ', 'DÂMBOVIȚA', 'GALAȚI', 'GIURGIU', 'GORJ', 'HARGHITA', 'HUNEDOARA', 'IALOMIȚA', 'IAȘI', 'ILFOV', 'NECUNOSCUT', 'MARAMUREȘ', 'MEHEDINȚI', 'MUREȘ', 'NEAMȚ', 'OLT', 'PRAHOVA', 'SATU MARE', 'SIBIU', 'SUCEAVA', 'SĂLAJ', 'TELEORMAN', 'TIMIȘ', 'TULCEA', 'VASLUI', 'VRANCEA', 'VÂLCEA'\n];\nexport const countyColor = d3.scaleOrdinal(countyColors).domain(counties);\n\nexport const genderColor = (language) => {\n    return language === 'ro'\n        ? d3.scaleOrdinal(['var(--main-barbat)', 'var(--main-femeie)']).domain(['Bărbat', 'Femeie'])\n        : d3.scaleOrdinal(['var(--main-barbat)', 'var(--main-femeie)']).domain(['Male', 'Female']);\n};\n\nexport const ageColor = d3.scaleQuantile()\n    .domain([0, 100])\n    .range(d3.schemeSpectral[10]);\n\nexport const colorStatus = () => {\n    let svg = d3.select('#chart').select('svg');\n\n    svg.selectAll('.nodes')\n        .transition().duration(100)\n        .attr('fill', d => {\n            return (d.is_country_of_infection)\n                ? 'black'\n                : d.properties ? statusColor('ro')(d.properties.status) : ''\n        });\n\n    showLegend('status-legend');\n}\n\nexport const colorCounties = () => {\n    let svg = d3.select('#chart').select('svg');\n\n    svg.selectAll('.nodes')\n        .transition().duration(100)\n        .attr('fill', d => {\n            return (d.is_country_of_infection)\n                ? 'black'\n                : d.properties ? countyColor(d.properties.county) : ''\n        });\n\n    showLegend('county-legend');\n}\n\nexport const colorGender = () => {\n    let svg = d3.select('#chart').select('svg');\n\n    svg.selectAll('.nodes')\n        .transition().duration(100)\n        .attr('fill', d => {\n            return (d.is_country_of_infection)\n                ? 'black'\n                : d.properties\n                    ? d.properties.gender === null\n                        ? 'var(--main-null)'\n                        : genderColor('ro')(d.properties.gender)\n                    : ''\n        });\n\n    showLegend('gender-legend');\n}\n\nexport const colorAge = () => {\n    let svg = d3.select('#chart').select('svg');\n\n    svg.selectAll('.nodes')\n        .transition().duration(100)\n        .attr('fill', d => {\n            return (d.is_country_of_infection)\n                ? 'black'\n                : d.properties\n                    ? d.properties.age === null\n                        ? 'var(--main-null)'\n                        : ageColor(d.properties.age)\n                    : ''\n        });\n\n    showLegend('age-legend');\n}\n\nexport const createLegend = (colorScale, height, vbHeight, legendClass, legendTitle) => {\n\n    const legend = d3.select('#legend-div')\n        .append('div')\n            .attr('class', legendClass)\n        .append('svg')\n            .attr('class', 'category-legend')\n            .attr('width', 110)\n            .attr('height', height)\n            .attr('preserveAspectRatio', 'xMidYMid')\n            .attr('viewBox', '-10, -10 ' + 120 + ' ' + vbHeight)\n            .attr('x', 0)\n            .attr('y', 0);\n\n    const categoryLegend = d3.legendColor()\n                            .shape('path', d3.symbol().type(d3.symbolCircle).size(150)())\n                            .shapePadding(10)\n                            .title(legendTitle)\n                            .titleWidth(100)\n                            .labelFormat(d3.format('.0f'))\n                            .labelAlign('start')\n                            .scale(colorScale);\n\n    legend.call(categoryLegend);\n}\n\nexport const showLegend = category => {\n    d3.select('.county-legend').classed('hide', true);\n    d3.select('.status-legend').classed('hide', true);\n    d3.select('.gender-legend').classed('hide', true);\n    d3.select('.age-legend').classed('hide', true);\n\n    if (category === 'county-legend') {\n        d3.select('.county-legend').classed('hide', false);\n    } else if (category === 'status-legend') {\n        d3.select('.status-legend').classed('hide', false);\n    } else if (category === 'gender-legend') {\n        d3.select('.gender-legend').classed('hide', false);\n    } else if (category === 'age-legend') {\n        d3.select('.age-legend').classed('hide', false);\n    }\n}\n\nexport const updateRadius = (cases, nRadius) => {\n    // adjust the text on the range slider\n    d3.select('#nRadius-value').text(cases[nRadius]);\n    d3.select('#nRadius').property('value', cases[nRadius]);\n    d3.select('#search-input').property('value', cases[nRadius]);\n\n    // highlight case\n    d3.selectAll('.nodes')\n        .attr('r', d => d.r)\n    d3.select('#CO-' + cases[nRadius])\n        .attr('r', d => 2 * d.r)\n        .dispatch('mouseover');\n        // .dispatch('click');\n}\n\nconst zoomed = () => {\n    let zoomableGroup = d3.selectAll('.zoomable-group');\n\n    zoomableGroup.attr(\"transform\", d3.event.transform);\n\n    let scale = d3.event.transform.k;\n    if (scale > 0.8) {\n        zoomableGroup.selectAll('.node-labels > text')\n            .attr('transform', 'scale(' + (1 / scale) + ')');\n        zoomableGroup.selectAll('.labels > text')\n            .attr('transform', 'scale(' + (1 / scale) + ')');\n    };\n    return hideLabels(scale);\n}\n\nexport const hideLabels = (z) => {\n    d3.selectAll('.node-labels')\n        .classed('hidden', d => {\n            if (typeof(d.name) !== 'string') {\n                return z <= 1.9;\n            } else {\n                return false;\n            }\n        });\n    d3.selectAll('.labels')\n        .classed('hidden', d => d.r < 10 / z);\n};\n\nexport const zoom = d3.zoom()\n    .scaleExtent([0.2, 10])\n    .on('zoom', zoomed);\n\nexport const resetZoom = () => {\n    let svg = d3.select('#chart').select('svg');\n\n    svg.call(zoom.transform, d3.zoomIdentity.scale(0.5));\n};\n\nexport const panTo = d => {\n    let svg = d3.select('#chart').select('svg');\n\n    d3.event.stopPropagation();\n    svg.transition().duration(750).call(\n        zoom.transform,\n        d3.zoomIdentity\n            .scale(2)\n            .translate(-d.x, -d.y)\n            .translate(Config.svg_width / 2, Config.svg_height / 2),\n        d3.mouse(svg.node())\n    );\n};\n\nexport const fixed = (nodes, positioning, immediate, idToNode, xScale, yScale) => {\n    if (positioning === 'map' || positioning === 'clusters') {\n        nodes.forEach(function (d) {\n            const pos = Config.projection([d.longitude, d.latitude]);\n            d.x = pos[0] || d.x;\n            d.y = pos[1] || d.y;\n        });\n    } else {\n        nodes.forEach(function (d) {\n            d.x = xScale(d.date) || -100;\n            d.y = yScale(d.dayOrder);\n        });\n    }\n\n    const t = d3.transition()\n        .duration(immediate ? 0 : 800)\n        .ease(d3.easeElastic.period(0.5));\n\n    Simulation.update(idToNode, d3.selectAll('.nodes').transition(t), d3.selectAll('.links').transition(t), d3.selectAll('.node-labels').transition(t), positioning, xScale, yScale)\n\n};\n\nexport const showMap = (graph, simulation, idToNode, xScale, yScale) => {\n    let positioning = 'map';\n\n    d3.select('#positioning').attr('value', 'map');\n\n    simulation.stop();\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style('opacity', 1);\n    d3.selectAll('.land').attr('opacity', 1);\n    d3.selectAll('.time-graph').attr('opacity', 0);\n    d3.selectAll('.pack-group').attr('transform', 'translate(-10000,-10000)');\n    \n    fixed(graph.nodes, positioning, 0, idToNode, xScale, yScale);\n};\n\nexport const showMapClusters = (graph, simulation, idToNode, xScale, yScale) => {\n    let positioning = 'clusters';\n    d3.select('#positioning').attr('value', 'map');\n\n    simulation.stop();\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style('opacity', 1);\n    d3.selectAll('.land').attr('opacity', 1);\n    d3.selectAll('.time-graph').attr('opacity', 0);\n    d3.selectAll('.pack-group').attr('opacity', 1);\n    \n    fixed(graph.nodes, positioning, 0, idToNode, xScale, yScale);\n\n    d3.selectAll('.nodes-group').style('opacity', 0);\n};\n\nexport const showGraph = (simulation) => {\n    d3.select('#positioning').attr('value', 'diagram');\n\n    simulation.alpha(1).restart();\n    setTimeout(() => {\n        simulation.stop();\n    }, 5000);\n\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style('opacity', 1);\n    d3.selectAll('.land').attr('opacity', 0.25);\n    d3.selectAll('.time-graph').attr('opacity', 0);\n    d3.selectAll('.pack-group').attr('transform', 'translate(-10000,-10000)');\n};\n\nexport const showArcs = (graph, simulation, idToNode, xScale, yScale) => {\n    let positioning = 'arcs';\n    d3.select('#positioning').attr('value', 'arcs');\n\n    simulation.stop();\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style('opacity', 1);\n    d3.selectAll('.land').attr('opacity', 0.25);\n    d3.selectAll('.time-graph').attr('opacity', 1);\n    d3.selectAll('.pack-group').attr('transform', 'translate(-10000,-10000)');\n    \n    fixed(graph.nodes, positioning, 0, idToNode, xScale, yScale);\n};\n","import * as Config from './Config';\nimport * as Layout from './Layout';\nimport * as Simulation from './Simulation';\nimport * as Tooltip from './Tooltip';\n\nexport const CirclesPacks = (geoCounties, graphNodes) => {\n    let root,\n    pack,\n    packGroup,\n    counties_list = {},\n    countyCasesData = [],\n    groupedByCountySource,\n    sec_simulation,\n    bubbles, en_bubbles, bubble_labels, en_bubble_labels;\n\n    let zoomableGroup = d3.select('svg').select('.zoomable-group');\n\n    packGroup = zoomableGroup.append('g')\n        .attr('class', 'pack-group')\n        .attr('opacity', 0);\n\n    sec_simulation = Simulation.packSimulation();\n\n    groupedByCountySource = d3.nest()\n        .key( d => d.properties && d.properties.county)\n        .key( d => d.properties && d.properties.source_no)\n        .entries(graphNodes);\n    groupedByCountySource.forEach(key => counties_list[key.key] = 1);\n\n    // Create a list containing the counties, the cases and root\n    countyCasesData.push({\n        id: 'root',\n        parent: ''\n    });\n\n    geoCounties.forEach(d => {\n        if (counties_list[d.id] !== undefined) {\n            return countyCasesData.push({\n                id: d.id,\n                parent: 'root',\n                d: d\n            });\n        }\n    });\n\n    groupedByCountySource.forEach(key => {\n        if (key.key !== 'undefined') {\n            let valuesArr = [...key['values'] ]\n                .filter(d => d.key !== 'null')\n                .sort((a,b) => a.name - b.name);\n            valuesArr.forEach(d => {\n                countyCasesData.push({\n                    id: d.key,\n                    parent: key.key,\n                    source_case: d,\n                    value: d.values.length\n                });\n            });\n        };\n    });\n\n    // Stratify the list\n    root = (d3.stratify()\n        .id(d => d.id)\n        .parentId(d => d.parent))(countyCasesData);\n    root.sum(d => d.value)\n        .sort((a, b) => b.value - a.value);\n\n    // Pack\n    pack = d3.pack()\n        .size([Config.svg_width/2, Config.svg_height/2])\n        .padding(8);\n    pack(root);\n\n    // Define circles relations\n    root.eachBefore(d => {\n        if (d.parent != null) {\n            d.relx = d.x - d.parent.x;\n            return d.rely = d.y - d.parent.y;\n        } else {\n            d.relx = d.x;\n            return d.rely = d.y;\n        }\n    });\n    root.eachBefore(d => {\n        if ((d.parent != null) && d.parent.id === 'root') {\n        return d.data.d.force.r = d.r;\n        }\n    });\n\n    let language = d3.select('#language').node().value;\n\n    // Draw the circle packs\n    bubbles = packGroup.selectAll('.bubble')\n        .data(root.descendants())\n        .enter().append('g')\n        .each(function(d) { d.node = this; })\n        .on('mouseover', Tooltip.hovered(true))\n        .on('mouseout', Tooltip.hovered(false));\n    en_bubbles = bubbles.append('circle')\n        .attr('class', 'bubble')\n        .attr('r', d => d.r)\n        .on('touchmove mouseover', d => Tooltip.highlightSearchedId(d.id))\n        .attr('fill', d => d.parent && d.parent.id !== 'root' ? Layout.countyColor(d.parent.id) : '#E8E8E8')\n    en_bubbles.append('title').text(d => (language === 'ro'\n                ? d.data.parent + ' - sursa ' + d.id + '\\n' + d.value + ' cazuri'\n                : d.data.parent + ' - source ' + d.id + '\\n' + d.value + ' cases'));\n    bubble_labels = packGroup.selectAll('.labels').data(root.leaves());\n    en_bubble_labels = bubble_labels.enter().append('g').attr('class', 'labels');\n\n    en_bubble_labels.append('text')\n        .text(d => d.value)\n        .attr('dy', '0.35em');\n    Layout.hideLabels(1);\n\n    // Move the circles to their place\n    sec_simulation.nodes(geoCounties.map(d => d.force)).stop();\n    let i,j,ref;\n    for (i = j = 0, ref = Math.ceil(Math.log(sec_simulation.alphaMin()) / Math.log(1 - sec_simulation.alphaDecay())); 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        sec_simulation.tick();\n    }\n};\n\nexport const GroupCirclesPack = () => {\n    d3.select('.pack-group').attr('transform', 'scale(2)');\n    d3.selectAll('.bubble').attr('transform', d => `translate(${d.x},${d.y})`);\n    d3.selectAll('.labels').attr('transform', d => `translate(${d.x},${d.y})`);\n};\n\nexport const MapCirclesPack = () => {\n    d3.select('.pack-group').attr('transform', 'scale(1)');\n    d3.selectAll('.bubble').attr('transform', d => d.parent && d.parent.data.d ? `translate(${d.relx + d.parent.data.d.force.x},${d.rely + d.parent.data.d.force.y})` : 'translate(-10000,-10000)');\n    d3.selectAll('.labels').attr('transform', d => d.parent && d.parent.data.d ? `translate(${d.relx + d.parent.data.d.force.x},${d.rely + d.parent.data.d.force.y})` : 'translate(-10000,-10000)');\n};\n\nexport const CountiesMap = (geoCounties, geojsonFeatures) => {\n    let zoomableGroup = d3.select('svg').select('.zoomable-group');\n\n    const thisMapPath = d3.geoPath()\n        .projection(\n            Config.projection\n                  .fitSize([Config.svg_width , Config.svg_height], geojsonFeatures));\n\n    const mapFeatures = zoomableGroup.append('g')\n        .attr('class', 'map-features')\n        .selectAll('path')\n            .data(geoCounties)\n            .enter()\n            .append('path')\n            .attr('d', thisMapPath)\n                .attr('class', 'land')\n                .attr('opacity', 0.25);\n\n    mapFeatures.append('title').text(d => d.id);\n};\n\nexport const TimeLine = (xScale, yScale) => {\n    let zoomableGroup = d3.select('svg').select('.zoomable-group');\n\n    let language = d3.select('#language').node().value;\n\n    const timeGraph = zoomableGroup.append('g')\n        .attr('class', 'time-graph')\n        .attr('opacity', 0);\n\n    const xLabel = timeGraph.append('text')\n        .attr('y', Config.svg_height + 70)\n        .attr('x', Config.svg_width / 2)\n        .attr('font-size', '16px')\n        .attr('text-anchor', 'middle')\n        .text(language === 'ro' ? 'Ziua' : 'Day');\n    const xAxis = timeGraph.append('g')\n        .attr('transform', `translate(0,${Config.svg_height})`)\n        .call(d3.axisBottom(xScale)\n            .ticks(30)\n            .tickFormat(Config.multiFormat));\n    xAxis.selectAll('text')\n        .attr('class', 'time-graph-x')\n        .attr('font-weight', 'bold')\n        .style('text-anchor', 'end')\n        .attr('dx', '-.8em')\n        .attr('transform', 'rotate(-65)');\n    const yAxis = timeGraph.append('g')\n        .call(d3.axisLeft(yScale)\n            .ticks(10));\n    yAxis.selectAll('text')\n        .attr('class', 'time-graph-y')\n        .attr('font-weight', 'bold');\n    const yLabel = timeGraph.append('text')\n        .attr('transform', 'rotate(-90)')\n        .attr('y', -50)\n        .attr('x', -Config.svg_height / 2)\n        .attr('font-size', '20px')\n        .attr('text-anchor', 'middle')\n        .text(language === 'ro' ? 'Cazuri ordonate pe zi' : 'Ordered cases per day');\n}\n\nexport const NodesAndLinks = (graph, cases, simulation, positioning) => {\n    let links, nodes;\n\n    let zoomableGroup = d3.select('svg').select('.zoomable-group');\n    let nodesGroup = zoomableGroup.append('g')\n        .attr('class', 'nodes-group');\n\n    // Add arrows for links\n    const markerTypes = Array.from(new Set(graph.nodes.map(d => d.source)));\n    nodesGroup.append('defs').selectAll('marker')\n        .data(markerTypes)\n            .join('marker')\n                .attr('id', d => `arrow-${d}`)\n                .attr('viewBox', '0 -5 10 10')\n                .attr('refX', 15)\n                .attr('refY', -0.5)\n                .attr('markerWidth', 6)\n                .attr('markerHeight', 6)\n                .attr('orient', 'auto')\n            .append('path')\n                .attr('fill', '#999')\n                .attr('d', 'M0,-5L10,0L0,5');\n    \n    links = nodesGroup.append('g')\n            .attr('class', 'link')\n            .selectAll('path')\n            .data(graph.links)\n            .join('path')\n                .attr('class', d => `CO-links-${d.source.name}`)\n                .classed('links', true)\n                .attr('marker-end', d => `url(${new URL(`#arrow-${d.type}`, location.toString())})`);\n    links.exit().remove();\n\n    nodes = nodesGroup.append('g')\n        .attr('class', 'node')\n        .selectAll('g')\n        .data(graph.nodes)\n        .join('g');\n            // .call(Simulation.drag(simulation, positioning));\n\n    nodes.append('circle')\n        .attr('id', d => d.properties && `CO-${d.properties.case_no}`)\n        .attr('class', d => d.properties && `CO-nodes-${d.properties.source_no}`)\n        .classed('nodes', true)\n        .attr('r', d => d.r)\n        .on('touchmove mouseover', d => Tooltip.highlight(d, cases))\n        .on('click', d => Layout.panTo(d));\n\n    nodes.append('g')\n        .classed('node-labels', true)\n        .append('text')\n            .attr('class', d => d.properties && `CO-labels-${d.properties.source_no} CO-labels-self-${d.properties.case_no}`)\n            .attr('x', 8)\n            .attr('y', '0.31em')\n            .text(d => d.name)\n            .clone(true).lower();\n\n    nodes.exit().remove();\n} \n","import * as Config from '../Config';\n\n// MapChart Class\nexport default class MapChart {\n    constructor (_parentElement, geoCounties, geojsonFeatures) {\n        this.parentElement = _parentElement;\n        this.geoCounties = geoCounties;\n        this.geojsonFeatures = geojsonFeatures;\n\n        this.initViz();\n    };\n  \n    initViz () {\n        var viz = this;\n\n        viz.height = Config.svg_height;\n        viz.width = Config.svg_width;\n    \n        viz.g = d3.select(viz.parentElement).append(\"g\")\n            .attr('class', 'map-features')\n            .attr('opacity', 1);\n\n        viz.setupData();\n    };\n\n    setupData () {\n        var viz = this;\n\n        viz.dataFiltered = viz.geoCounties;\n        \n        viz.updateVis();\n    };\n\n    updateVis () {\n        var viz = this;\n\n        if (viz.dataFiltered !== undefined) {\n            console.log(viz.dataFiltered);\n                    \n            const thisMapPath = d3.geoPath()\n                .projection(\n                    Config.projection\n                        .fitSize([viz.width , viz.height], viz.geojsonFeatures));\n\n            const mapFeatures = viz.g.selectAll('path')\n                .data(viz.dataFiltered)\n                .enter()\n                .append('path')\n                .attr('d', thisMapPath)\n                    .attr('class', 'land')\n                    .attr('opacity', 0.25);\n        \n            mapFeatures.append('title').text(d => d.id);\n        };\n    };\n}\n","import * as Config from '../Config';\nimport * as Layout from '../Layout';\nimport * as Simulation from '../Simulation';\nimport * as Tooltip from '../Tooltip';\n\n// PackChart Class\nexport default class PackChart {\n    constructor (_parentElement, geoCounties, graphNodes) {\n        this.parentElement = _parentElement;\n        this.geoCounties = geoCounties;\n        this.graphNodes = graphNodes;\n\n        this.initViz();\n    };\n  \n    initViz () {\n        var viz = this;\n\n        viz.height = Config.svg_height;\n        viz.width = Config.svg_width;\n    \n        viz.g = d3.select(viz.parentElement).append(\"g\")\n            .attr('class', 'pack-group')\n            .attr('opacity', 0);\n\n        viz.setupData();\n    };\n\n    setupData () {\n        var viz = this;\n\n        let counties_list = {},\n            countyCasesData = [];\n\n        const groupedByCountySource = d3.nest()\n            .key( d => d.properties && d.properties.county)\n            .key( d => d.properties && d.properties.source_no)\n            .entries(viz.graphNodes);\n        groupedByCountySource.forEach(key => counties_list[key.key] = 1);\n\n        // Create a list containing the counties, the cases and root\n        countyCasesData.push({\n            id: 'root',\n            parent: ''\n        });\n\n        viz.geoCounties.forEach(d => {\n            if (counties_list[d.id] !== undefined) {\n                return countyCasesData.push({\n                    id: d.id,\n                    parent: 'root',\n                    d: d\n                });\n            }\n        });\n\n        groupedByCountySource.forEach(key => {\n            if (key.key !== 'undefined') {\n                let valuesArr = [...key['values'] ]\n                    .filter(d => d.key !== 'null')\n                    .sort((a,b) => a.name - b.name);\n                valuesArr.forEach(d => {\n                    countyCasesData.push({\n                        id: d.key,\n                        parent: key.key,\n                        source_case: d,\n                        value: d.values.length\n                    });\n                });\n            };\n        });\n\n        // Stratify the list\n        const root = (d3.stratify()\n            .id(d => d.id)\n            .parentId(d => d.parent))(countyCasesData);\n        root.sum(d => d.value)\n            .sort((a, b) => b.value - a.value);\n\n        // Pack\n        const pack = d3.pack()\n            .size([viz.width/2, viz.height/2])\n            .padding(8);\n        pack(root);\n\n        // Define circles relations\n        root.eachBefore(d => {\n            if (d.parent != null) {\n                d.relx = d.x - d.parent.x;\n                return d.rely = d.y - d.parent.y;\n            } else {\n                d.relx = d.x;\n                return d.rely = d.y;\n            }\n        });\n        root.eachBefore(d => {\n            if ((d.parent != null) && d.parent.id === 'root') {\n                return d.data.d.force.r = d.r;\n            }\n        });\n\n        viz.dataFiltered = root;\n        \n        viz.updateVis();\n    };\n\n    updateVis () {\n        var viz = this;\n\n        if (viz.dataFiltered !== undefined) {\n            console.log(viz.dataFiltered);\n            let bubbles, en_bubbles, bubble_labels, en_bubble_labels;\n            let language = d3.select('#language').node().value;\n\n            viz.simulation = Simulation.packSimulation();\n\n            // Draw the circle packs\n            bubbles = viz.g.selectAll('.bubble')\n                .data(viz.dataFiltered.descendants())\n                .enter().append('g')\n                .each(function(d) { d.node = this; })\n                .on('mouseover', Tooltip.hovered(true))\n                .on('mouseout', Tooltip.hovered(false));\n            en_bubbles = bubbles.append('circle')\n                .attr('class', 'bubble')\n                .attr('r', d => d.r)\n                .on('touchmove mouseover', d => Tooltip.highlightSearchedId(d.id))\n                .attr('fill', d => d.parent && d.parent.id !== 'root' ? Layout.countyColor(d.parent.id) : '#E8E8E8')\n            en_bubbles.append('title').text(d => (language === 'ro'\n                    ? d.data.parent + ' - sursa ' + d.id + '\\n' + d.value + ' cazuri'\n                    : d.data.parent + ' - source ' + d.id + '\\n' + d.value + ' cases'));\n            bubble_labels = viz.g.selectAll('.labels').data(viz.dataFiltered.leaves());\n            en_bubble_labels = bubble_labels.enter().append('g').attr('class', 'labels');\n\n            en_bubble_labels.append('text')\n                .text(d => d.value)\n                .attr('dy', '0.35em');\n            Layout.hideLabels(1);\n\n            // Move the circles to their place\n            viz.simulation.nodes(viz.geoCounties.map(d => d.force)).stop();\n            let i,j,ref;\n            for (i = j = 0, ref = Math.ceil(Math.log(viz.simulation.alphaMin()) / Math.log(1 - viz.simulation.alphaDecay())); 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n                viz.simulation.tick();\n            };\n        };\n    };\n}\n","import * as Config from './Config';\nimport * as Data from './Data';\nimport * as Tooltip from './Tooltip';\nimport * as Simulation from './Simulation';\nimport * as Draw from './Draw';\nimport * as Language from './Language';\nimport * as Layout from './Layout';\n\nimport MapChart from './models/MapChart';\nimport PackChart from './models/PackChart';\n\nlet graph = {nodes: [], links: []};\nlet svg, simulation, xScale, yScale, zoomableGroup, idToNode;\nlet sources, casesData, geoData, layer, geoCounties, geojsonFeatures;\nlet cases;\nlet countiesCentroids = d3.map();\n\nlet legendStatus = false, infoStatus = true, searchStatus = true;\nlet playCasesNow, thisCaseId, thisCaseOrder;\n\nlet positioning = d3.select('#positioning').node().value;\n\n// Switch the language to english/romanian\nlet language = d3.select('#language').node().value;\nlet countiesSource = language === 'ro' ? 'data/judete_wgs84.json' : '../data/judete_wgs84.json';\n\nlet mapChart, packChart;\n\n(() => {\n\n// Options for loading spinner\nlet opts = {lines: 9, length: 4, width: 5, radius: 12, scale: 1, corners: 1, color: '#f40000', opacity: 0.25, rotate: 0, direction: 1, speed: 1, trail: 30, fps: 20, zIndex: 2e9, className: 'spinner', shadow: false, hwaccel: false, position: 'absolute'},\n    target = document.getElementById('spinner'),\n    spinner;\n\n// Load data\nconst promises = [\n    d3.json(countiesSource),\n    d3.json('https://covid19.geo-spatial.org/api/statistics/getCaseRelations')\n];\n\nPromise.all(promises).then( data => {\n    geoData = data[0];\n    casesData = data[1];\n\n    spinner = new Spinner(opts).spin(target);\n    setupGraph();\n    drawGraph();\n    setTimeout(setActions(), 100);\n}).catch(\n    error => console.log(error)\n);\n\nconst setupGraph = () => {\n\n    sources = casesData.data.nodes.filter( d => d.properties.country_of_infection !== null && d.properties.country_of_infection !== 'România' && d.properties.country_of_infection !== 'Romania');\n\n    graph.nodes = casesData.data.nodes;\n    graph.links = casesData.data.links;\n\n    cases = Array.from(new Set(graph.nodes.map(d => d.properties ? +d.properties.case_no : '')));\n\n    // https://observablehq.com/d/cedc594061a988c6\n    graph.nodes = graph.nodes.concat(Array.from(new Set(sources.map(d => d.properties.country_of_infection)), name => ({name})));\n    graph.links = graph.links.concat(sources.map(d => ({target: d.name, source: d.properties.country_of_infection})));\n\n    layer = 'judete_wgs84';\n    geoCounties = topojson.feature(geoData, geoData.objects[layer]).features;\n    geojsonFeatures = topojson.feature(geoData, {\n        type: 'GeometryCollection',\n        geometries: geoData.objects[layer].geometries\n    });\n\n    geoCounties.forEach( d => {\n        let county = d.properties.county;\n        // Get lat, lon for nodes within county\n        countiesCentroids.set(county, {\n            lat: d.properties.lat,\n            lon: d.properties.lon,\n        });\n        d.id = county;\n        d.centroid = Config.projection.fitSize([Config.svg_width, Config.svg_height], geojsonFeatures)([d.properties.lon, d.properties.lat]);\n        // Set force for group by county\n        d.force = {};\n        d.force.x = d.centroid[0];\n        d.force.y = d.centroid[1];\n        d.force.foc_x = d.centroid[0];\n        d.force.foc_y = d.centroid[1];\n    });\n\n    graph.nodes = Data.formatNodes(graph.nodes, countiesCentroids);\n}\n\nconst drawGraph = () => {\n    // Setup the simulation\n    // https://gist.github.com/mbostock/1153292\n    const ticked = () => {\n        Simulation.update(idToNode, d3.selectAll('.nodes'), d3.selectAll('.links'), d3.selectAll('.node-labels'), positioning, xScale, yScale);\n    };\n\n    simulation = Simulation.graphSimulation(graph);\n    simulation.on('tick', ticked);\n    simulation.force('link').links(graph.links);\n\n    // Append the svg object to the chart div\n    svg = d3.select('#chart')\n        .append('svg')\n            .attr('class', 'chart-group')\n            .attr('preserveAspectRatio', 'xMidYMid')\n            .attr('width', Config.svg_width)\n            .attr('height', Config.svg_height)\n            .attr('viewBox', '0, 0 ' + Config.svg_width + ' ' + Config.svg_height)\n            .on('click', () => { Tooltip.unHighlight(); Tooltip.hideTooltip(); });\n\n    // Append zoomable group\n    zoomableGroup = svg.append('g')\n        .attr('class', 'zoomable-group')\n        .style('transform-origin', '50% 50% 0');\n\n    // Set object for map\n    mapChart = new MapChart(\".zoomable-group\", geoCounties, geojsonFeatures);\n\n    // Set object for clusters\n    packChart = new PackChart(\".zoomable-group\", geoCounties, graph.nodes);\n\n    // Map nodes name with nodes details\n    idToNode = Data.idToNodeFnc(graph);\n};\n\nconst setActions = () => {\n\n    // Add legends\n    Layout.createLegend(Layout.statusColor(language), 300, 300, 'status-legend', Language.status(language));\n    Layout.createLegend(Layout.countyColor, 900, 1100, 'county-legend', Language.county(language));\n    Layout.createLegend(Layout.genderColor(language), 200, 200, 'gender-legend', Language.gender(language));\n    Layout.createLegend(Layout.ageColor, 400, 400, 'age-legend', Language.age(language));\n\n    // Set scales for nodes by time\n    xScale = d3.scaleTime()\n        .domain(d3.extent(graph.nodes, d => d.date))\n        .range([0, Config.svg_width]);\n    yScale = d3.scaleLinear()\n        .domain(d3.extent(graph.nodes, d => d.dayOrder))\n        .range([Config.svg_height, 0]);\n\n    // Zoom by scroll, pan\n    d3.select('#zoom-in')\n        .on('click', () => svg.transition().call(Layout.zoom.scaleBy, 2));\n    d3.select('#zoom-out')\n        .on('click', () => svg.transition().call(Layout.zoom.scaleBy, 0.5));\n    d3.select('#reset-zoom').on('click', () => Layout.resetZoom());\n\n    // Apply zoom handler and zoom out\n    svg.call(Layout.zoom);\n    Layout.resetZoom();\n\n    // Toggle between map, graph and timeline chart\n    d3.select('#show-map')\n        .on('click', () => Layout.showMap(graph, simulation, idToNode, xScale, yScale));\n    d3.select('#show-map-clusters')\n        .on('click', () => {\n            Layout.showMapClusters(graph, simulation, idToNode, xScale, yScale);\n            Draw.MapCirclesPack();\n        });\n    d3.select('#show-clusters')\n        .on('click', () => {\n            Layout.showMapClusters(graph, simulation, idToNode, xScale, yScale);\n            d3.selectAll('.land').attr('opacity', 0.5);\n            Draw.GroupCirclesPack();\n        });\n    d3.select('#show-graph')\n        .on('click', () => Layout.showGraph(simulation));\n    d3.select('#show-arcs')\n        .on('click', () => Layout.showArcs(graph, simulation, idToNode, xScale, yScale));\n\n    // Change colors from status to counties and vice versa\n    d3.select('#color-counties')\n        .on('click', () => Layout.colorCounties());\n    d3.select('#color-status')\n        .on('click', () => Layout.colorStatus());\n    d3.select('#color-gender')\n        .on('click', () => Layout.colorGender());\n    d3.select('#color-age')\n        .on('click', () => Layout.colorAge());\n\n    // Toggle the legend\n    const toggleLegend = () => {\n        if (legendStatus === true) {\n            d3.select('#legend-div').classed('hide', true);\n            legendStatus = false;\n        } else {\n            d3.select('#legend-div').classed('hide', false);\n            legendStatus = true;\n        };\n    };\n    d3.select('#legend-div').classed('hide', true);\n    d3.select('#toggle-legend')\n        .on('click', () => toggleLegend());\n\n    // Highlight and pan to searched Id\n    d3.select('#search-case')\n        .on('click', () => {\n            if (searchStatus === true) {\n                d3.select('#search-input').classed('hide', false);\n                searchStatus = false;\n            } else {\n                d3.select('#search-input').classed('hide', true);\n                searchStatus = true;\n            };\n        });\n    d3.select('#search-input')\n        .on('input', () => {\n            if (cases.includes(+this.value)) {\n                Tooltip.highlightSearchedId(+this.value);\n            }\n        });\n\n    // General page info\n    d3.select('#show-info').on('click', () => infoStatus = Tooltip.toggleInfo(infoStatus, language));\n\n    // Start/stop the animation - highlight the cases ordered by day and case number\n    d3.select('#play-cases')\n        .on('click', () => {\n            d3.select('#play-cases').classed('hide', true);\n            d3.select('#pause-cases').classed('hide', false);\n            playCases();\n        });\n    d3.select('#pause-cases')\n        .on('click', () => {\n            d3.select('#pause-cases').classed('hide', true);\n            d3.select('#play-cases').classed('hide',false);\n            pauseCases();\n        });\n\n    const playCases = () => {\n        svg.call(Layout.zoom.scaleTo, 0.5);\n        thisCaseOrder = d3.select('#nRadius').node().value;\n        if (+thisCaseOrder === (+cases.length - 1)) thisCaseOrder = 0;\n\n        playCasesNow = setInterval(() => {\n            thisCaseId = cases[thisCaseOrder];\n            if (thisCaseId !== undefined) {\n                Layout.updateRadius(cases, thisCaseOrder);\n                thisCaseOrder++;\n            } else {\n                thisCaseOrder = 0;\n            }\n        }, 200);\n    };\n    const pauseCases = () => {\n        clearInterval(playCasesNow);\n    };\n\n    // Case slider to highlight nodes by id\n    // https://bl.ocks.org/d3noob/c4b31a539304c29767a56c2373eeed79/9d18fc47e580d8c940ffffea1179e77e62647e36\n\n    // When the input range changes highlight the circle\n    d3.select('#nRadius').on('input', function() {\n        Layout.updateRadius(cases, +this.value);\n    });\n    d3.select('#nRadius').property('max', cases.length-1);\n    Layout.updateRadius(cases, cases.length-1);\n\n\n    // Draw cases by time\n    Draw.TimeLine(xScale, yScale);\n\n    // Draw counties map\n    // Draw.CountiesMap(geoCounties, geojsonFeatures);\n    mapChart.setupData();\n\n    // Draw nodes and links\n    Draw.NodesAndLinks(graph, cases, simulation, positioning);\n\n    // Define the secondary simulation, for county groups\n    // Draw.CirclesPacks(geoCounties, graph.nodes, cases);\n    packChart.setupData();\n\n    // Color the legend for counties\n    Layout.colorStatus();\n\n    // Hide case labels first\n    Layout.hideLabels(1);\n\n\n    // Zoom to latest case, when loading spinner stops\n    setTimeout(() => {\n        simulation.stop();\n        spinner.stop();\n        d3.select('tooltip_div').classed('tooltip-abs', true);\n        d3.select('#CO-' + d3.max(cases))\n            .attr('r', d => 2 * d.r)\n            .dispatch('mouseover');\n    }, 5000);\n\n};\n\n}).call(this);","export const infoHtml = (language) => {\n    return language === 'ro'\n    ? '<strong>Relația cazurilor confirmate</strong>.<br/>Date de pe covid19.geo-spatial.org<br/>Situaţia până la data în care s-au raportat oficial aceste informaţii.<br/>Dați click în afara cercului pentru a deselecta.'\n    : '<strong>Relationship between confirmed cases</strong>.<br/>Data from covid19.geo-spatial.org<br/>The status until the date this information has been officially reported.<br/>Click outside the circle to clear the selection.';\n}\n\nexport const status = (language) => {\n    return language === 'ro'\n        ? 'Stare'\n        : 'Status';\n};\n\nexport const county = (language) => {\n    return language === 'ro'\n        ? 'Județ'\n        : 'County';\n};\n\nexport const gender = (language) => {\n    return language === 'ro'\n        ? 'Gen'\n        : 'Gender';\n};\n\nexport const age = (language) => {\n    return language === 'ro'\n        ? 'Vârstă'\n        : 'Age';\n};"],"names":["margin","width","window","innerWidth","height","innerHeight","svg_width","svg_height","projection","d3","geoAlbers","center","rotate","parallels","scale","translate","locale","geoPath","timeFormatLocale","dateTime","date","time","periods","days","shortDays","months","shortMonths","formatMillisecond","format","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","multiFormat","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeWeek","timeYear","idToTargetNodesFnc","nodes","nest","key","d","properties","source_no","rollup","v","length","object","tooltip_div","select","append","attr","style","tooltipHTML","undefined","language","node","value","labels","cazulLabel","ro","en","maleLabel","femaleLabel","unspecLabel","statusLabel","releasedLabel","confirmedLabel","deceasedLabel","confdateLabel","recoverydateLabel","infectionCountryLabel","detailsLabel","aiciLabel","countyInfo","gender","age","county","statusInfo","status","diagnosticDateInfo","diagnostic_date","healingDateInfo","healing_date","countyOfInfectionInfo","country_of_infection","referenceInfo","reference","case_no","name","highlightSearchedId","caseId","dispatch","hovered","hover","selectAll","ancestors","map","classed","linkArc","r","Math","hypot","target","x","source","y","update","idToNode","links","positioning","xScale","yScale","start","end","dayOrder","join","statusColor","scaleOrdinal","domain","countyColor","genderColor","ageColor","scaleQuantile","range","schemeSpectral","colorStatus","transition","duration","showLegend","createLegend","colorScale","vbHeight","legendClass","legendTitle","legend","categoryLegend","legendColor","shape","symbol","type","symbolCircle","size","shapePadding","title","titleWidth","labelFormat","labelAlign","call","category","updateRadius","cases","nRadius","text","property","hideLabels","z","zoom","scaleExtent","on","zoomableGroup","event","transform","k","resetZoom","zoomIdentity","fixed","immediate","forEach","pos","Config.projection","longitude","latitude","t","ease","easeElastic","period","Simulation.update","showMapClusters","graph","simulation","stop","NodesAndLinks","nodesGroup","markerTypes","Array","from","Set","data","URL","location","toString","exit","remove","left","pageX","top","pageY","i","indexOf","html","Tooltip.highlight","svg","stopPropagation","Config.svg_width","Config.svg_height","mouse","Layout.panTo","clone","lower","MapChart","[object Object]","_parentElement","geoCounties","geojsonFeatures","this","parentElement","initViz","g","setupData","dataFiltered","updateVis","console","log","thisMapPath","fitSize","enter","id","PackChart","graphNodes","counties_list","countyCasesData","groupedByCountySource","entries","push","parent","filter","sort","a","b","source_case","values","root","stratify","parentId","sum","pack","padding","eachBefore","relx","rely","force","viz","bubbles","en_bubbles","bubble_labels","en_bubble_labels","j","ref","forceSimulation","forceCollide","radius","strength","forceAttract","foc_x","foc_y","descendants","each","Tooltip.hovered","Tooltip.highlightSearchedId","Layout.countyColor","leaves","Layout.hideLabels","ceil","alphaMin","alphaDecay","tick","sources","casesData","geoData","layer","playCasesNow","thisCaseId","thisCaseOrder","mapChart","packChart","countiesCentroids","legendStatus","infoStatus","searchStatus","countiesSource","spinner","opts","lines","corners","color","opacity","direction","speed","trail","fps","zIndex","className","shadow","hwaccel","position","document","getElementById","promises","json","Promise","all","then","Spinner","spin","setupGraph","drawGraph","setTimeout","setActions","catch","error","concat","topojson","feature","objects","features","geometries","set","lat","lon","centroid","parseTime","timeParse","formattedData","idToTargetNodes","rScale","scaleLinear","max","Object","get","getTime","infected_persons","valuesArr","valuesPerDay","Data.formatNodes","forceLink","forceCenter","forceManyBody","forceX","forceY","Simulation.graphSimulation","dict","n","Data.idToNodeFnc","Layout.createLegend","Layout.statusColor","Language.status","Language.county","Layout.genderColor","Language.gender","Layout.ageColor","Language.age","scaleTime","extent","Layout.zoom","scaleBy","Layout.resetZoom","Layout.showMap","Layout.showMapClusters","alpha","restart","Layout.showGraph","Layout.showArcs","Layout.colorStatus","includes","Language.infoHtml","Tooltip.toggleInfo","playCases","pauseCases","scaleTo","setInterval","Layout.updateRadius","clearInterval","timeGraph","axisBottom","ticks","tickFormat","Config.multiFormat","axisLeft","Draw.TimeLine","Draw.NodesAndLinks"],"mappings":"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"}