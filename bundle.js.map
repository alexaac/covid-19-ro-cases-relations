{"version":3,"file":"bundle.js","sources":["../src/Config.js","../src/Data.js","../src/Simulation.js","../src/Layout.js","../src/Tooltip.js","../src/Draw.js","../src/main.js","../src/Language.js"],"sourcesContent":["// set the dimensions and margins of the graph\nexport const margin = { top: 100, left: 100, bottom: 50, right: 100 },\n    width = window.innerWidth - margin.left - margin.right,\n    height = window.innerHeight - margin.top - margin.bottom,\n    svg_width = width + margin.left + margin.right,\n    svg_height = height + margin.top + margin.bottom;\n\nexport const projection = d3.geoAlbers()\n    .center([24.7731, 45.7909])\n    .rotate([-14, 3.3, -10])\n    .parallels([37, 54])\n    .scale(5000)\n    .translate([svg_width / 2, svg_height / 2]);\n\nexport const path = d3.geoPath()\n    .projection(projection);\n\nconst locale = d3.timeFormatLocale({\n    \"dateTime\": \"%A, %e %B %Y г. %X\",\n    \"date\": \"%d.%m.%Y\",\n    \"time\": \"%H:%M:%S\",\n    \"periods\": [\"AM\", \"PM\"],\n    \"days\": [\"Luni\", \"Marți\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sâmbătă\", \"Duminică\"],\n    \"shortDays\": [\"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\", \"Du\"],\n    \"months\": [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"Noiembrie\", \"Decembrie\"],\n    \"shortMonths\": [\"Ian\", \"Feb\", \"Mart\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nconst formatMillisecond = locale.format(\".%L\"),\n    formatSecond = locale.format(\":%S\"),\n    formatMinute = locale.format(\"%I:%M\"),\n    formatHour = locale.format(\"%I %p\"),\n    formatDay = locale.format(\"%a %d\"),\n    formatWeek = locale.format(\"%b %d\"),\n    formatMonth = locale.format(\"%B\"),\n    formatYear = locale.format(\"%Y\");\n\nexport const multiFormat = (date) => {\n    return (d3.timeSecond(date) < date ? formatMillisecond\n    : d3.timeMinute(date) < date ? formatSecond\n    : d3.timeHour(date) < date ? formatMinute\n    : d3.timeDay(date) < date ? formatHour\n    : d3.timeMonth(date) < date ? (d3.timeWeek(date) < date ? formatDay : formatWeek)\n    : d3.timeYear(date) < date ? formatMonth\n    : formatYear)(date);\n}","export const formatNodes = (nodes, countiesCentroids) => {\n    let parseTime = d3.timeParse(\"%d-%m-%Y\");\n    let formattedData = [];\n\n    let idToTargetNodes = idToTargetNodesFnc(nodes);\n    let rScale = d3.scaleLinear()\n        .domain([0,d3.max(Object.values(idToTargetNodes))])\n        .range([5,25])\n\n    nodes.forEach( d => {\n        if (d.properties !== undefined) {\n            d.latitude = countiesCentroids.get(d.properties.county) && countiesCentroids.get(d.properties.county).lat;\n            d.longitude = countiesCentroids.get(d.properties.county) && countiesCentroids.get(d.properties.county).lon;\n            d.date = parseTime(d.properties.diagnostic_date).getTime();\n            d.name = +d.name;\n            d.infected_persons = (idToTargetNodes[d.properties.case_no] + 1) || 1;\n            d.r = rScale(d.infected_persons);\n        } else {\n            d.r = 3;\n        };\n    });\n    nodes.sort((a,b) => a.date - b.date);\n\n    var ed_data = d3.nest()\n        .key(function(d) {\n            return d.properties && d.properties.diagnostic_date;\n        })\n        .entries(nodes);\n    ed_data.forEach(function(key){\n        let valuesArr = [...key[\"values\"] ].sort((a,b) => a.name - b.name);\n        let valuesPerDay = valuesArr.map(function(d){\n                d.dayOrder = valuesArr.indexOf(d) + 1;\n                return d;\n            });\n        formattedData.push(...valuesPerDay)\n    });\n\n    return formattedData;\n};\n\nexport const idToNodeFnc = (graph) => {\n    let dict = {};\n    graph.nodes.forEach(function(n) {\n        dict[n.name] = n;\n    });\n    return dict;\n};\n\nexport const idToTargetNodesFnc = (nodes) => {\n    return d3.nest()\n        .key(function(d) {\n            return d.properties && d.properties.source_no;\n        })\n        .rollup(function(v) { return v.length; })\n        .object(nodes); // returns a nested object\n};\n","import * as Config from './Config';\n\nexport const graphSimulation = (graph) => {\n    return d3.forceSimulation(graph.nodes)\n        .force(\"link\", d3.forceLink(graph.links).id( d => d.name))\n        .force(\"center\", d3.forceCenter(Config.svg_width / 2, Config.svg_height / 2))\n        .force(\"charge\", d3.forceManyBody())\n        // .force(\"collision\", d3.forceCollide().radius(d => d.radius))\n        .force(\"x\", d3.forceX())\n        .force(\"y\", d3.forceY())\n        .alphaDecay([0.02]);\n};\n\nexport const packSimulation = () => {\n    return d3.forceSimulation()\n    .force('collision', d3.forceCollide()\n        .radius(d => d.radius )\n        .strength(0.01))\n    .force('attract', d3.forceAttract()\n        .target(d => [d.foc_x, d.foc_y])\n        .strength(0.5));\n}\n\n// simulation drag\nexport const drag = (simulation, positioning) => {\n    const dragstarted = d => {\n        if (positioning !== 'diagram') { return };\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n    }\n\n    const dragged = d => {\n        if (positioning !== 'diagram') { return };\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n    }\n\n    const dragended = d => {\n        if (positioning !== 'diagram') { return };\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n    }\n\n    return d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended);\n};\n\n// simulation link\nexport const linkArc = (d) => {\n    const r = Math.hypot(d.target.x - d.source.x, d.target.y - d.source.y);\n    return `\n        M${d.source.x},${d.source.y}\n        A${r},${r} 0 0,1 ${d.target.x},${d.target.y}\n    `;\n};\n\nexport const update = (idToNode, nodes, links, labels, positioning, xScale, yScale) => {\n\n    links.attr(\"d\", d => {\n        if (positioning === 'arcs') {\n            if (typeof(d.source.name) === \"string\") {\n                return linkArc(d)\n            } else {\n                let start = xScale(idToNode[d.source.name].date) || 0;\n                let end = xScale(idToNode[d.target.name].date);\n                const arcPath = ['M', start, yScale(idToNode[d.source.name].dayOrder), 'A', (start - end)/2, ',', (start-end)/2, 0,0,\",\",\n                            start < end ? 1: 0, end, yScale(idToNode[d.target.name].dayOrder)].join(' ');\n                return arcPath;\n            }\n        } else {\n            return linkArc(d)\n        }\n    });\n    nodes.attr(\"transform\", d => `translate(${d.x},${d.y})`);\n    labels.attr(\"transform\", d => `translate(${d.x},${d.y})`);\n};\n","import * as Config from './Config';\nimport * as Draw from './Draw';\nimport * as Simulation from './Simulation';\n\nexport const statusColor = (language) => {\n    return language === \"ro\"\n        ? d3.scaleOrdinal([\"var(--main-confirmate)\", \"var(--main-recuperari)\", \"var(--main-decese)\"]).domain([\"Confirmat\", \"Vindecat\", \"Decedat\"])\n        : d3.scaleOrdinal([\"var(--main-confirmate)\", \"var(--main-recuperari)\", \"var(--main-decese)\"]).domain([\"Confirmed\", \"Discharged\", \"Deceased\"]);\n};\n\n// https://medialab.github.io/iwanthue/\n// hcl[0]>=0 && hcl[0]<=340\n//     && hcl[1]>=30 && hcl[1]<=80\n//     && hcl[2]>=35 && hcl[2]<=100\nconst countyColors = [\n    \"#e4588c\", \"#35d394\", \"#ba1ea8\", \"#4caf1c\", \"#1848ca\", \"#aad42b\", \"#9b85ff\", \"#068400\", \"#8b2487\", \"#97ff8b\", \"#d60042\", \"#00ae87\", \"#f94740\", \"#48d3ff\", \"#d17300\", \"#5ea2ff\", \"#cfb100\", \"#53498f\", \"#ffe353\", \"#325383\", \"#86a700\", \"#ff9eeb\", \"#007f30\", \"#d9b6ff\", \"#3b5c12\", \"#89c2ff\", \"#964000\", \"#00bfbb\", \"#ff6f54\", \"#01aac6\", \"#ffb65d\", \"#008857\", \"#ff8e90\", \"#145f36\", \"#952e31\", \"#fffea6\", \"#8e3440\", \"#5a936f\", \"#883d0c\", \"#ffaf81\", \"#34a6c2\", \"#b09764\", \"#458a18\"\n];\nconst counties = [\n    \"ALBA\", \"ARAD\", \"ARGEȘ\", \"BACĂU\", \"BIHOR\", \"BISTRIȚA-NĂSĂUD\", \"BOTOȘANI\", \"BRAȘOV\", \"BRĂILA\", \"BUCUREȘTI\", \"BUZĂU\", \"CARAȘ-SEVERIN\", \"CLUJ\", \"CONSTANȚA\", \"COVASNA\", \"CĂLĂRAȘI\", \"DOLJ\", \"DÂMBOVIȚA\", \"GALAȚI\", \"GIURGIU\", \"GORJ\", \"HARGHITA\", \"HUNEDOARA\", \"IALOMIȚA\", \"IAȘI\", \"ILFOV\", \"NECUNOSCUT\", \"MARAMUREȘ\", \"MEHEDINȚI\", \"MUREȘ\", \"NEAMȚ\", \"OLT\", \"PRAHOVA\", \"SATU MARE\", \"SIBIU\", \"SUCEAVA\", \"SĂLAJ\", \"TELEORMAN\", \"TIMIȘ\", \"TULCEA\", \"VASLUI\", \"VRANCEA\", \"VÂLCEA\"\n];\nexport const countyColor = d3.scaleOrdinal(countyColors).domain(counties);\n\nexport const genderColor = (language) => {\n    return language === \"ro\"\n        ? d3.scaleOrdinal([\"var(--main-barbat)\", \"var(--main-femeie)\"]).domain([\"Bărbat\", \"Femeie\"])\n        : d3.scaleOrdinal([\"var(--main-barbat)\", \"var(--main-femeie)\"]).domain([\"Male\", \"Female\"]);\n};\n\nexport const ageColor = d3.scaleQuantile()\n    .domain([0, 100])\n    .range(d3.schemeSpectral[10]);\n\nexport const colorStatus = () => {\n    let svg = d3.select(\"#chart\").select(\"svg\");\n\n    svg.selectAll(\".nodes\")\n        .transition().duration(100)\n        .attr(\"fill\", d => {\n            return (d.is_country_of_infection)\n                ? \"black\"\n                : d.properties ? statusColor(\"ro\")(d.properties.status) : \"\"\n        });\n\n    showLegend(\"status-legend\");\n}\n\nexport const colorCounties = () => {\n    let svg = d3.select(\"#chart\").select(\"svg\");\n\n    svg.selectAll(\".nodes\")\n        .transition().duration(100)\n        .attr(\"fill\", d => {\n            return (d.is_country_of_infection)\n                ? \"black\"\n                : d.properties ? countyColor(d.properties.county) : \"\"\n        });\n\n    showLegend(\"county-legend\");\n}\n\nexport const colorGender = () => {\n    let svg = d3.select(\"#chart\").select(\"svg\");\n\n    svg.selectAll(\".nodes\")\n        .transition().duration(100)\n        .attr(\"fill\", d => {\n            return (d.is_country_of_infection)\n                ? \"black\"\n                : d.properties\n                    ? d.properties.gender === null\n                        ? \"var(--main-null)\"\n                        : genderColor(\"ro\")(d.properties.gender)\n                    : \"\"\n        });\n\n    showLegend(\"gender-legend\");\n}\n\nexport const colorAge = () => {\n    let svg = d3.select(\"#chart\").select(\"svg\");\n\n    svg.selectAll(\".nodes\")\n        .transition().duration(100)\n        .attr(\"fill\", d => {\n            return (d.is_country_of_infection)\n                ? \"black\"\n                : d.properties\n                    ? d.properties.age === null\n                        ? \"var(--main-null)\"\n                        : ageColor(d.properties.age)\n                    : \"\"\n        });\n\n    showLegend(\"age-legend\");\n}\n\nexport const createLegend = (colorScale, height, vbHeight, legendClass, legendTitle) => {\n\n    const legend = d3.select(\"#legend-div\")\n        .append(\"div\")\n            .attr(\"class\", legendClass)\n        .append(\"svg\")\n            .attr(\"class\", \"category-legend\")\n            .attr(\"width\", 110)\n            .attr(\"height\", height)\n            .attr(\"preserveAspectRatio\", \"xMidYMid\")\n            .attr(\"viewBox\", \"-10, -10 \" + 120 + \" \" + vbHeight)\n            .attr(\"x\", 0)\n            .attr(\"y\", 0);\n\n    const categoryLegend = d3.legendColor()\n                            .shape(\"path\", d3.symbol().type(d3.symbolCircle).size(150)())\n                            .shapePadding(10)\n                            .title(legendTitle)\n                            .titleWidth(100)\n                            .labelFormat(d3.format(\".0f\"))\n                            .labelAlign(\"start\")\n                            .scale(colorScale);\n\n    legend.call(categoryLegend);\n}\n\nexport const showLegend = category => {\n    d3.select(\".county-legend\").classed(\"hide\", true);\n    d3.select(\".status-legend\").classed(\"hide\", true);\n    d3.select(\".gender-legend\").classed(\"hide\", true);\n    d3.select(\".age-legend\").classed(\"hide\", true);\n\n    if (category === \"county-legend\") {\n        d3.select(\".county-legend\").classed(\"hide\", false);\n    } else if (category === \"status-legend\") {\n        d3.select(\".status-legend\").classed(\"hide\", false);\n    } else if (category === \"gender-legend\") {\n        d3.select(\".gender-legend\").classed(\"hide\", false);\n    } else if (category === \"age-legend\") {\n        d3.select(\".age-legend\").classed(\"hide\", false);\n    }\n}\n\nexport const updateRadius = (cases, nRadius) => {\n    // adjust the text on the range slider\n    d3.select(\"#nRadius-value\").text(cases[nRadius]);\n    d3.select(\"#nRadius\").property(\"value\", cases[nRadius]);\n    d3.select(\"#search-input\").property(\"value\", cases[nRadius]);\n\n    // highlight case\n    d3.selectAll(\".nodes\")\n        .attr(\"r\", d => d.r)\n    d3.select(\"#CO-\" + cases[nRadius])\n        .attr(\"r\", d => 2 * d.r)\n        .dispatch(\"mouseover\");\n        // .dispatch(\"click\");\n}\n\nconst zoomed = () => {\n    let zoomableGroup = d3.selectAll(\".zoomable-group\");\n    let scale = d3.event.transform.k;\n\n    zoomableGroup.attr(\"transform\", \"translate(\" + 0 + \") scale(\" + scale + \")\");\n    if (scale > 0.8) {\n        zoomableGroup.selectAll(\".node-labels > text\")\n            .attr(\"transform\", \"scale(\" + (1 / scale) + \")\");\n        zoomableGroup.selectAll(\".labels > text\")\n            .attr(\"transform\", \"scale(\" + (1 / scale) + \")\");\n    };\n    return hideLabels(scale);\n}\n\nexport const hideLabels = function(z) {\n    d3.selectAll(\".node-labels\")\n        .classed(\"hidden\", d => {\n            if (typeof(d.name) !== \"string\") {\n                return z <= 1.9;\n            } else {\n                return false;\n            }\n        });\n    d3.selectAll(\".labels\")\n        .classed(\"hidden\", d => d.r < 10 / z);\n};\n\nexport const zoom = d3.zoom()\n    .scaleExtent([0.2, 10])\n    .on(\"zoom\", zoomed);\n\nexport const resetZoom = () => {\n    let svg = d3.select(\"#chart\").select(\"svg\");\n\n    svg.call(zoom.scaleTo, 0.5);\n};\n\nexport const panTo = d => {\n    let svg = d3.select(\"#chart\").select(\"svg\");\n\n    d3.event.stopPropagation();\n    svg.transition().duration(750).call(\n        zoom.transform,\n        d3.zoomIdentity.translate(Config.svg_width / 2, Config.svg_height / 2)\n            .scale(2)\n            .translate(-d.x, -d.y),\n        d3.mouse(svg.node())\n    );\n};\n\nexport const fixed = (nodes, positioning, immediate, idToNode, xScale, yScale) => {\n    if (positioning === \"map\" || positioning === \"clusters\") {\n        nodes.forEach(function (d) {\n            const pos = Config.projection([d.longitude, d.latitude]);\n            d.x = pos[0] || d.x;\n            d.y = pos[1] || d.y;\n        });\n    } else {\n        nodes.forEach(function (d) {\n            d.x = xScale(d.date) || -100;\n            d.y = yScale(d.dayOrder);\n        });\n    }\n\n    const t = d3.transition()\n        .duration(immediate ? 0 : 800)\n        .ease(d3.easeElastic.period(0.5));\n\n    Simulation.update(idToNode, d3.selectAll(\".nodes\").transition(t), d3.selectAll(\".links\").transition(t), d3.selectAll(\".node-labels\").transition(t), positioning, xScale, yScale)\n\n};\n\nexport const showMap = (graph, simulation, idToNode, xScale, yScale) => {\n    let positioning = \"map\";\n\n    d3.select(\"#positioning\").attr(\"value\", \"map\");\n\n    simulation.stop();\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style(\"opacity\", 1);\n    d3.selectAll('.land').attr(\"opacity\", 1);\n    d3.selectAll('.time-graph').attr(\"opacity\", 0);\n    d3.selectAll('.pack-group').attr(\"opacity\", 0);\n    \n    fixed(graph.nodes, positioning, 0, idToNode, xScale, yScale);\n\n    d3.selectAll('.nodes').call(Simulation.drag(simulation, positioning));\n};\n\nexport const showMapClusters = (graph, simulation, idToNode, xScale, yScale) => {\n    let positioning = \"clusters\";\n    d3.select(\"#positioning\").attr(\"value\", \"map\");\n\n    simulation.stop();\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style(\"opacity\", 1);\n    d3.selectAll('.land').attr(\"opacity\", 1);\n    d3.selectAll('.time-graph').attr(\"opacity\", 0);\n    d3.selectAll('.pack-group').attr(\"opacity\", 1);\n    \n    fixed(graph.nodes, positioning, 0, idToNode, xScale, yScale);\n\n    d3.selectAll('.nodes').call(Simulation.drag(simulation, positioning));\n    d3.selectAll('.nodes-group').style(\"opacity\", 0);\n};\n\nexport const showGraph = (simulation) => {\n    let positioning = \"diagram\";\n    d3.select(\"#positioning\").attr(\"value\", \"diagram\");\n\n    simulation.alpha(1).restart();\n    setTimeout(function() {\n        simulation.stop();\n    }, 5000);\n\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style(\"opacity\", 1);\n    d3.selectAll('.land').attr(\"opacity\", 0.25);\n    d3.selectAll('.time-graph').attr(\"opacity\", 0);\n    d3.selectAll('.pack-group').attr(\"opacity\", 0);\n    d3.selectAll('.nodes').call(Simulation.drag(simulation, positioning));\n};\n\nexport const showArcs = (graph, simulation, idToNode, xScale, yScale) => {\n    let positioning = \"arcs\";\n    d3.select(\"#positioning\").attr(\"value\", \"arcs\");\n\n    simulation.stop();\n    resetZoom();\n\n    d3.selectAll('.nodes-group').style(\"opacity\", 1);\n    d3.selectAll('.land').attr(\"opacity\", 0.25);\n    d3.selectAll('.time-graph').attr(\"opacity\", 1);\n    d3.selectAll('.pack-group').attr(\"opacity\", 0);\n    \n    fixed(graph.nodes, positioning, 0, idToNode, xScale, yScale);\n\n    d3.selectAll('.nodes').call(Simulation.drag(simulation, positioning));\n};\n","import * as Config from './Config';\nimport * as Language from './Language';\n\n// use a tooltip to show node info\nexport const tooltip_div = d3.select(\"body\")\n   .append(\"tooltip_div\")\n   .attr(\"class\", \"tooltip\")\n   .style(\"opacity\", 0)\n   .style(\"display\", \"none\");\n\nexport const highlight = (d, cases) => {\n    let positioning = d3.select(\"#positioning\").node().value;\n\n    if (positioning === \"clusters\") {\n        return;\n    };\n\n    let left = d3.event.pageX -20;\n    let top = d3.event.pageY + 20;\n \n    let caseId = d.name;\n\n    if (window.innerWidth - left < 150){\n        left = d3.event.pageX - 40;\n    }\n \n    d3.selectAll(\".nodes\")\n        .attr(\"r\", d => d.r)\n        .style(\"opacity\", 0.3);\n    d3.selectAll(\".links\")\n        .style(\"stroke\", \"#999\")\n        .style(\"opacity\", 0.3);\n    d3.selectAll(\".node-labels > text\")\n        .style(\"opacity\", 0.3);\n\n    tooltip_div.transition()\n        .duration(200)\n        .style(\"opacity\", .9);\n\n    d3.select(\"#CO-\" + caseId)\n        .attr(\"r\", d => 2 * d.r)\n        .style(\"opacity\", 1);\n    d3.selectAll(\".CO-labels-self-\" + caseId)\n        .style(\"opacity\", \"1\");\n    d3.selectAll(\".CO-links-\" + caseId)\n        .style(\"stroke\", \"firebrick\")\n        .transition()\n            .duration(200)\n            .attr(\"stroke-dashoffset\", 0)\n            .style(\"opacity\", 1)\n            .on(\"end\", function(d, i) {\n                if (i === 0)\n                d3.selectAll(\".CO-nodes-\" + caseId)\n                    .style(\"opacity\", \"1\");\n                d3.selectAll(\".CO-labels-\" + caseId)\n                    .style(\"opacity\", \"1\");\n            });\n\n    // adjust the text on the range slider\n    let name = cases.indexOf(caseId);\n    d3.select(\"#nRadius-value\").text(caseId);\n    d3.select(\"#nRadius\").property(\"value\", name);\n\n    tooltip_div.html(tooltipHTML(d))\n        .style(\"left\", left + 'px')\n        .style(\"top\", top + 'px')\n        .style(\"display\", null);\n};\n\nexport const tooltipHTML = (d) => {\n    if (d.properties !== undefined) {\n        let language = d3.select(\"#language\").node().value;\n\n        let labels = {\n            cazulLabel: { \"ro\": \"Cazul\", \"en\": \"Case\" },\n            maleLabel: { \"ro\": \"Bărbat\", \"en\": \"Male\" },\n            femaleLabel: { \"ro\": \"Femeie\", \"en\": \"Female\" },\n            unspecLabel: { \"ro\": \"Gen nespecificat\", \"en\": \"Unspecified gender\" },\n            statusLabel: { \"ro\": \"Stare\", \"en\": \"Status\" },\n            releasedLabel: { \"ro\": \"vindecat\", \"en\": \"released\" },\n            confirmedLabel: { \"ro\": \"confirmat\", \"en\": \"confirmed\" },\n            deceasedLabel: { \"ro\": \"deces\", \"en\": \"deceased\" },\n            confdateLabel: { \"ro\": \"Data confirmării\", \"en\": \"Confirmation date\" },\n            recoverydateLabel: { \"ro\": \"Data recuperării\", \"en\": \"Recovery date\" },\n            infectionCountryLabel: { \"ro\": \"Țara de infectare\", \"en\": \"Country of infection\" },\n            detailsLabel: { \"ro\": \"Detalii\", \"en\": \"Details\" },\n            aiciLabel: { \"ro\": \"aici\", \"en\": \"here\" },\n        };\n\n        let genderInfo = d.properties.gender === \"Bărbat\"\n                ? labels.maleLabel[language]\n                : (d.properties.gender === \"Femeie\"\n                    ? labels.femaleLabel[language]\n                    : labels.unspecLabel[language]),\n            ageInfo = d.properties.age != null && d.properties.age != 0\n                ? (\", \" + d.properties.age)\n                : \"\",\n            countyInfo = d.properties.county != null && d.properties.county != \"\"\n                ? (\", \" + d.properties.county)\n                : \"\",\n            statusInfo = d.properties.status != null\n                ? (labels.statusLabel[language] + \": \" + (d.properties.status === \"Vindecat\"\n                        ? labels.releasedLabel[language]\n                        : (d.properties.status === \"Confirmat\"\n                            ? labels.confirmedLabel[language]\n                            : labels.deceasedLabel[language])) + \".<br />\")\n                : \"\",\n            diagnosticDateInfo = d.properties.diagnostic_date !== null\n                ? (labels.confdateLabel[language] + \": \" + d.properties.diagnostic_date + \".<br />\")\n                : \"\",\n            healingDateInfo = d.properties.healing_date !== null\n                ? (labels.recoverydateLabel[language] + \": \" + d.properties.healing_date + \".<br />\")\n                : \"\",\n            countyOfInfectionInfo = d.properties.country_of_infection !== null \n                                    && d.properties.country_of_infection !== \"România\"\n                                    && d.properties.country_of_infection !== \"Romania\"\n                ? (labels.infectionCountryLabel[language] + \": \" + d.properties.country_of_infection + \".<br />\")\n                : \"\",\n            referenceInfo = d.properties.reference !== null && d.properties.reference !== \"\"\n                ? (labels.detailsLabel[language] + \": \" + '<a href=\"' + d.properties.reference + '\" target= \"_blank\">'+ labels.aiciLabel[language] +'</a>')\n                : \"\";\n\n        return \"<b>\" + labels.cazulLabel[language] + \" \" + d.properties.case_no + \"</b>\" +\n            // genderInfo + ageInfo +\n            countyInfo + \".<br />\" +\n            statusInfo +\n            diagnosticDateInfo +\n            healingDateInfo +\n            countyOfInfectionInfo +\n            referenceInfo\n        ;\n    } else {\n        return d.name;\n    };\n};\n\nexport const unHighlight = () => {\n    d3.selectAll(\".nodes\")\n        .style(\"opacity\", 1);\n    d3.selectAll(\".link\")\n        .style(\"opacity\", 1);\n    d3.selectAll(\".node-labels > text\")\n        .style(\"opacity\", \"1\");\n};\n\nexport const hideTooltip = () => {\n    d3.selectAll(\".nodes\")\n        .attr(\"r\", d => d.r)\n    tooltip_div.transition()\n        .duration(200)\n        .style(\"opacity\", 0);\n};\n\nexport const highlightSearchedId = (caseId) => {\n    d3.select(\"#CO-\" + caseId)\n        .dispatch('mouseover');\n        // .dispatch('click');\n};\n\nexport const toggleInfo = (infoStatus) => {\n    if (infoStatus === true) {\n        tooltip_div.transition()\n            .duration(200)\n            .style(\"opacity\", .9);\n        tooltip_div.html(Language.infoHtml(language))\n            .style(\"left\", Config.svg_width / 2 + 'px')\n            .style(\"top\", Config.svg_height / 2 + 'px')\n            .style(\"display\", null);\n        infoStatus = false;\n    } else {\n        tooltip_div.transition()\n            .duration(200)\n            .style(\"opacity\", 0);\n        infoStatus = true;\n    }\n\n    return infoStatus;\n};\n\nexport const hovered = (hover) => {\n    return (d) => {\n        d3.selectAll(d.ancestors().map(function(d) { return d.node; })).classed(\"node--hover\", hover);\n    };\n};","import * as Config from './Config';\nimport * as Layout from './Layout';\nimport * as Simulation from './Simulation';\nimport * as Tooltip from './Tooltip';\n\nexport const CirclesPacks = (geoCounties, graphNodes) => {\n    let root,\n    pack,\n    packGroup,\n    counties_list = {},\n    countyCasesData = [],\n    groupedByCountySource,\n    sec_simulation,\n    bubbles, en_bubbles, bubble_labels, en_bubble_labels;\n\n    let zoomableGroup = d3.select(\"svg\").select('.zoomable-group');\n\n    packGroup = zoomableGroup.append('g')\n        .attr(\"class\", 'pack-group')\n        .attr(\"opacity\", 0);\n\n    sec_simulation = Simulation.packSimulation();\n\n    groupedByCountySource = d3.nest()\n        .key( d => d.properties && d.properties.county)\n        .key( d => d.properties && d.properties.source_no)\n        .entries(graphNodes);\n    groupedByCountySource.forEach(function(key){\n        counties_list[key.key] = 1;\n    });\n\n    // Create a list containing the counties, the cases and root\n    countyCasesData.push({\n        id: \"root\",\n        parent: \"\"\n    });\n\n    geoCounties.forEach(function(d) {\n        if (counties_list[d.id] !== undefined) {\n            return countyCasesData.push({\n                id: d.id,\n                parent: \"root\",\n                d: d\n            });\n        }\n    });\n\n    groupedByCountySource.forEach(function(key){\n        if(key.key !== \"undefined\") {\n            let valuesArr = [...key[\"values\"] ]\n                .filter(d => d.key !== \"null\")\n                .sort((a,b) => a.name - b.name);\n            valuesArr.forEach(function(d) {\n                countyCasesData.push({\n                    id: d.key,\n                    parent: key.key,\n                    source_case: d,\n                    value: d.values.length\n                });\n            });\n        }\n    });\n\n    // Stratify the list\n    root = (d3.stratify()\n        .id(d => d.id)\n        .parentId(d => d.parent))(countyCasesData);\n    root.sum(d => d.value)\n        .sort((a, b) => b.value - a.value);\n\n    // Pack\n    pack = d3.pack()\n        .size([Config.svg_width/2, Config.svg_height/2])\n        .padding(8);\n    pack(root);\n\n    // Define circles relations\n    root.eachBefore(d => {\n        if (d.parent != null) {\n            d.relx = d.x - d.parent.x;\n            return d.rely = d.y - d.parent.y;\n        } else {\n            d.relx = d.x;\n            return d.rely = d.y;\n        }\n    });\n    root.eachBefore(d => {\n        if ((d.parent != null) && d.parent.id === 'root') {\n        return d.data.d.force.r = d.r;\n        }\n    });\n\n    let language = d3.select(\"#language\").node().value;\n\n    // Draw the circle packs\n    bubbles = packGroup.selectAll('.bubble')\n        .data(root.descendants())\n        .enter().append(\"g\")\n        .each(function(d) { d.node = this; })\n        .on(\"mouseover\", Tooltip.hovered(true))\n        .on(\"mouseout\", Tooltip.hovered(false));\n    en_bubbles = bubbles.append('circle')\n        .attr(\"class\", 'bubble')\n        .attr(\"r\", d => d.r)\n        .on(\"touchmove mouseover\", d => Tooltip.highlightSearchedId(d.id))\n        .attr(\"fill\", d => d.parent && d.parent.id !== \"root\" ? Layout.countyColor(d.parent.id) : \"#E8E8E8\")\n    en_bubbles.append('title').text(function(d) {\n            return (language === \"ro\"\n                ? d.data.parent + \" - sursa nr. \" + d.id + \"\\n\" + d.value + \" cazuri\"\n                : d.data.parent + \" - source no. \" + d.id + \"\\n\" + d.value + \" cases\")  ;\n        });\n    bubble_labels = packGroup.selectAll('.labels').data(root.leaves());\n    en_bubble_labels = bubble_labels.enter().append('g').attr(\"class\", 'labels');\n\n    en_bubble_labels.append('text')\n        .text(d => d.value)\n        .attr(\"dy\", '0.35em');\n    Layout.hideLabels(1);\n\n    // Move the circles to their place\n    sec_simulation.nodes(geoCounties.map(d => d.force)).stop();\n    let i,j,ref;\n    for (i = j = 0, ref = Math.ceil(Math.log(sec_simulation.alphaMin()) / Math.log(1 - sec_simulation.alphaDecay())); 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        sec_simulation.tick();\n    }\n};\n\nexport const GroupCirclesPack = () => {\n    d3.select('.pack-group').attr(\"transform\", \"scale(2)\");\n    d3.selectAll('.bubble').attr(\"transform\", d => `translate(${d.x},${d.y})`);\n    d3.selectAll('.labels').attr(\"transform\", d => `translate(${d.x},${d.y})`);\n};\n\nexport const MapCirclesPack = () => {\n    d3.select('.pack-group').attr(\"transform\", \"scale(1)\");\n    d3.selectAll('.bubble').attr(\"transform\", d => d.parent && d.parent.data.d ? `translate(${d.relx + d.parent.data.d.force.x},${d.rely + d.parent.data.d.force.y})` : \"translate(-10000,-10000)\");\n    d3.selectAll('.labels').attr(\"transform\", d => d.parent && d.parent.data.d ? `translate(${d.relx + d.parent.data.d.force.x},${d.rely + d.parent.data.d.force.y})` : \"translate(-10000,-10000)\");\n};\n\nexport const CountiesMap = (geoCounties, geojsonFeatures) => {\n    let zoomableGroup = d3.select(\"svg\").select('.zoomable-group');\n\n    const thisMapPath = d3.geoPath()\n        .projection(\n            Config.projection\n                  .fitSize([Config.svg_width , Config.svg_height], geojsonFeatures));\n\n    zoomableGroup.append(\"g\")\n        .attr(\"class\", \"map-features\")\n        .selectAll(\"path\")\n            .data(geoCounties)\n            .enter()\n            .append(\"path\")\n            .attr(\"d\", thisMapPath)\n                .attr(\"class\", \"land\")\n                .attr(\"opacity\", 0.25);\n};\n\nexport const TimeLine = (xScale, yScale) => {\n    let zoomableGroup = d3.select(\"svg\").select('.zoomable-group');\n\n    const timeGraph = zoomableGroup.append(\"g\")\n        .attr(\"class\", \"time-graph\")\n        .attr(\"opacity\", 0);\n\n    const xLabel = timeGraph.append(\"text\")\n        .attr(\"y\", Config.svg_height + 70)\n        .attr(\"x\", Config.svg_width / 2)\n        .attr(\"font-size\", \"16px\")\n        .attr(\"text-anchor\", \"middle\")\n        .text(\"Ziua\");\n    const xAxis = timeGraph.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + (Config.svg_height) + \")\")\n        .call(d3.axisBottom(xScale)\n            .ticks(30)\n            .tickFormat(Config.multiFormat));\n    xAxis.selectAll('text')\n        .attr(\"class\", \"time-graph-x\")\n        .attr(\"font-weight\", \"bold\")\n        .style(\"text-anchor\", \"end\")\n        .attr(\"dx\", \"-.8em\")\n        .attr(\"transform\", \"rotate(-65)\");\n    const yAxis = timeGraph.append(\"g\")\n        .call(d3.axisLeft(yScale)\n            .ticks(10));\n    yAxis.selectAll('text')\n        .attr(\"class\", \"time-graph-y\")\n        .attr(\"font-weight\", \"bold\");\n    const yLabel = timeGraph.append(\"text\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"y\", -50)\n        .attr(\"x\", -Config.svg_height / 2)\n        .attr(\"font-size\", \"20px\")\n        .attr(\"text-anchor\", \"middle\")\n        .text(\"Cazuri pe zi\")\n}\n\nexport const NodesAndLinks = (graph, cases, simulation, positioning) => {\n    let links, nodes;\n\n    let zoomableGroup = d3.select(\"svg\").select('.zoomable-group');\n    let nodesGroup = zoomableGroup.append('g')\n        .attr(\"class\", 'nodes-group');\n\n    // Add arrows for links\n    const markerTypes = Array.from(new Set(graph.nodes.map(d => d.source)));\n    nodesGroup.append(\"defs\").selectAll(\"marker\")\n        .data(markerTypes)\n            .join(\"marker\")\n                .attr(\"id\", d => `arrow-${d}`)\n                .attr(\"viewBox\", \"0 -5 10 10\")\n                .attr(\"refX\", 15)\n                .attr(\"refY\", -0.5)\n                .attr(\"markerWidth\", 6)\n                .attr(\"markerHeight\", 6)\n                .attr(\"orient\", \"auto\")\n            .append(\"path\")\n                .attr(\"fill\", \"#999\")\n                .attr(\"d\", \"M0,-5L10,0L0,5\");\n    \n    links = nodesGroup.append(\"g\")\n            .attr(\"class\", \"link\")\n            .selectAll(\"path\")\n            .data(graph.links)\n            .join(\"path\")\n                .attr(\"class\", d => `CO-links-${d.source.name}`)\n                .classed(\"links\", true)\n                .attr(\"marker-end\", d => `url(${new URL(`#arrow-${d.type}`, location.toString())})`);\n    links.exit().remove();\n\n    nodes = nodesGroup.append(\"g\")\n        .attr(\"class\", \"node\")\n        .selectAll(\"g\")\n        .data(graph.nodes)\n        .join(\"g\")\n            .call(Simulation.drag(simulation, positioning));\n\n    nodes.append(\"circle\")\n        .attr(\"id\", d => d.properties && `CO-${d.properties.case_no}`)\n        .attr(\"class\", d => d.properties && `CO-nodes-${d.properties.source_no}`)\n        .classed(\"nodes\", true)\n        .attr(\"r\", d => d.r)\n        .on(\"touchmove mouseover\", d => Tooltip.highlight(d, cases))\n        .on(\"click\", d => Layout.panTo(d));\n\n    nodes.append('g')\n        .classed(\"node-labels\", true)\n        .append(\"text\")\n            .attr(\"class\", d => d.properties && `CO-labels-${d.properties.source_no} CO-labels-self-${d.properties.case_no}`)\n            .attr(\"x\", 8)\n            .attr(\"y\", \"0.31em\")\n            .text(d => d.name)\n            .clone(true).lower();\n\n    nodes.exit().remove();\n} ","import * as Config from './Config';\nimport * as Data from './Data';\nimport * as Draw from './Draw';\nimport * as Layout from './Layout';\nimport * as Tooltip from './Tooltip';\nimport * as Language from './Language';\nimport * as Simulation from './Simulation';\n\nlet graph = {nodes: [], links: []};\nlet svg, simulation, xScale, yScale, zoomableGroup, idToNode;\nlet sources, casesData, geoData, layer, geoCounties, geojsonFeatures;\nlet legendStatus = false, infoStatus = true, searchStatus = true;\nlet cases, playCasesNow, thisCaseId, thisCaseOrder;\nlet countiesCentroids = d3.map();\n\nlet positioning = d3.select(\"#positioning\").node().value;\n\n// Switch the language to english/romanian\nlet language = d3.select(\"#language\").node().value;\nlet countiesSource = language === \"ro\" ? \"data/judete_wgs84.json\" : \"../data/judete_wgs84.json\";\n\n(() => {\n\n// Options for loading spinner\nlet opts = {lines: 9, length: 4, width: 5, radius: 12, scale: 1, corners: 1, color: '#f40000', opacity: 0.25, rotate: 0, direction: 1, speed: 1, trail: 30, fps: 20, zIndex: 2e9, className: 'spinner', shadow: false, hwaccel: false, position: 'absolute'},\n    target = document.getElementById('spinner'),\n    spinner;\n\n// Load data\nconst promises = [\n    d3.json(countiesSource),\n    d3.json(\"https://covid19.geo-spatial.org/api/statistics/getCaseRelations\")\n];\n\nPromise.all(promises).then( data => {\n    geoData = data[0];\n    casesData = data[1];\n\n    spinner = new Spinner(opts).spin(target);\n    setupGraph();\n    setTimeout(drawGraph(), 100);\n}).catch(\n    error => console.log(error)\n);\n\nconst setupGraph = () => {\n\n    sources = casesData.data.nodes.filter( d => d.properties.country_of_infection !== null && d.properties.country_of_infection !== \"România\" && d.properties.country_of_infection !== \"Romania\");\n\n    graph.nodes = casesData.data.nodes;\n    graph.links = casesData.data.links;\n\n    cases = Array.from(new Set(graph.nodes.map(d => d.properties ? +d.properties.case_no : \"\")));\n\n    // https://observablehq.com/d/cedc594061a988c6\n    graph.nodes = graph.nodes.concat(Array.from(new Set(sources.map(d => d.properties.country_of_infection)), name => ({name})));\n    graph.links = graph.links.concat(sources.map(d => ({target: d.name, source: d.properties.country_of_infection})));\n\n    layer = \"judete_wgs84\";\n    geoCounties = topojson.feature(geoData, geoData.objects[layer]).features;\n    geojsonFeatures = topojson.feature(geoData, {\n        type: \"GeometryCollection\",\n        geometries: geoData.objects[layer].geometries\n    });\n\n    geoCounties.forEach( d => {\n        let county = d.properties.county;\n        // Get lat, lon for nodes within county\n        countiesCentroids.set(county, {\n            lat: d.properties.lat,\n            lon: d.properties.lon,\n        });\n        d.id = county;\n        d.centroid = Config.projection.fitSize([Config.svg_width, Config.svg_height], geojsonFeatures)([d.properties.lon, d.properties.lat]);\n        // Set force for group by county\n        d.force = {};\n        d.force.x = d.centroid[0];\n        d.force.y = d.centroid[1];\n        d.force.foc_x = d.centroid[0];\n        d.force.foc_y = d.centroid[1];\n    });\n\n    graph.nodes = Data.formatNodes(graph.nodes, countiesCentroids);\n}\n\nconst drawGraph = () => {\n    // Add legends\n    Layout.createLegend(Layout.statusColor(language), 300, 300, \"status-legend\", Language.status(language));\n    Layout.createLegend(Layout.countyColor, 900, 1100, \"county-legend\", Language.county(language));\n    Layout.createLegend(Layout.genderColor(language), 200, 200, \"gender-legend\", Language.gender(language));\n    Layout.createLegend(Layout.ageColor, 400, 400, \"age-legend\", Language.age(language));\n\n    // Set scales for nodes by time\n    xScale = d3.scaleTime()\n        .domain(d3.extent(graph.nodes, function(d) { return d.date; }))\n        .range([0, Config.svg_width]);\n    yScale = d3.scaleLinear()\n        .domain(d3.extent(graph.nodes, function(d) { return d.dayOrder; }))\n        .range([Config.svg_height, 0]);\n\n    // Map nodes name with nodes details\n    idToNode = Data.idToNodeFnc(graph);\n\n    // Setup the simulation\n    // https://gist.github.com/mbostock/1153292\n    const ticked = () => {\n        Simulation.update(idToNode, d3.selectAll('.nodes'), d3.selectAll('.links'), d3.selectAll('.node-labels'), positioning, xScale, yScale);\n    };\n\n    simulation = Simulation.graphSimulation(graph);\n    simulation.on('tick', ticked);\n    simulation.force('link').links(graph.links);\n\n    // Append the svg object to the chart div\n    svg = d3.select(\"#chart\")\n        .append(\"svg\")\n            .attr(\"class\", \"chart-group\")\n            .attr(\"preserveAspectRatio\", \"xMidYMid\")\n            .attr(\"width\", Config.svg_width)\n            .attr(\"height\", Config.svg_height)\n            .attr(\"viewBox\", '0, 0 ' + Config.svg_width + ' ' + Config.svg_height)\n            .on(\"click\", () => { Tooltip.unHighlight(); Tooltip.hideTooltip(); });\n\n    // Append zoomable group\n    zoomableGroup = svg.append(\"g\")\n        .attr(\"class\", \"zoomable-group\")\n        .style(\"transform-origin\", \"50% 50% 0\");\n\n    // Zoom by scroll, pan\n    d3.select(\"#zoom-in\")\n        .on(\"click\", () => svg.transition().call(Layout.zoom.scaleBy, 2));\n    d3.select(\"#zoom-out\")\n        .on(\"click\", () => svg.transition().call(Layout.zoom.scaleBy, 0.5));\n    d3.select(\"#reset-zoom\").on(\"click\", () => Layout.resetZoom());\n\n    // Apply zoom handler and zoom out\n    svg.call(Layout.zoom);\n    Layout.resetZoom();\n\n    // Toggle between map, graph and timeline chart\n    d3.select(\"#show-map\")\n        .on(\"click\", () => Layout.showMap(graph, simulation, idToNode, xScale, yScale));\n    d3.select(\"#show-map-clusters\")\n        .on(\"click\", () => {\n            Layout.showMapClusters(graph, simulation, idToNode, xScale, yScale);\n            Draw.MapCirclesPack();\n        });\n    d3.select(\"#show-clusters\")\n        .on(\"click\", () => {\n            Layout.showMapClusters(graph, simulation, idToNode, xScale, yScale);\n            d3.selectAll('.land').attr(\"opacity\", 0.5);\n            Draw.GroupCirclesPack();\n        });\n    d3.select(\"#show-graph\")\n        .on(\"click\", () => Layout.showGraph(simulation));\n    d3.select(\"#show-arcs\")\n        .on(\"click\", () => Layout.showArcs(graph, simulation, idToNode, xScale, yScale));\n\n    // Change colors from status to counties and vice versa\n    d3.select(\"#color-counties\")\n        .on(\"click\", () => Layout.colorCounties());\n    d3.select(\"#color-status\")\n        .on(\"click\", () => Layout.colorStatus());\n    d3.select(\"#color-gender\")\n        .on(\"click\", () => Layout.colorGender());\n    d3.select(\"#color-age\")\n        .on(\"click\", () => Layout.colorAge());\n\n    // Toggle the legend\n    const toggleLegend = () => {\n        if (legendStatus === true) {\n            d3.select(\"#legend-div\").classed(\"hide\", true);\n            legendStatus = false;\n        } else {\n            d3.select(\"#legend-div\").classed(\"hide\", false);\n            legendStatus = true;\n        };\n    };\n    d3.select(\"#legend-div\").classed(\"hide\", true);\n    d3.select(\"#toggle-legend\")\n        .on(\"click\", () => toggleLegend());\n\n    // Highlight and pan to searched Id\n    d3.select(\"#search-case\")\n        .on(\"click\", () => {\n            if (searchStatus === true) {\n                d3.select(\"#search-input\").classed(\"hide\", false);\n                searchStatus = false;\n            } else {\n                d3.select(\"#search-input\").classed(\"hide\", true);\n                searchStatus = true;\n            };\n        });\n    d3.select(\"#search-input\")\n        .on(\"input\", function() {\n            if (cases.includes(+this.value)) {\n                Tooltip.highlightSearchedId(+this.value);\n            }\n        });\n\n    // General page info\n    d3.select(\"#show-info\").on(\"click\", () => infoStatus = Tooltip.toggleInfo(infoStatus));\n\n    // Start/stop the animation - highlight the cases ordered by day and case number\n    d3.select(\"#play-cases\")\n        .on(\"click\", () => {\n            d3.select(\"#play-cases\").classed(\"hide\", true);\n            d3.select(\"#pause-cases\").classed(\"hide\", false);\n            playCases();\n        });\n    d3.select(\"#pause-cases\")\n        .on(\"click\", () => {\n            d3.select(\"#pause-cases\").classed(\"hide\", true);\n            d3.select(\"#play-cases\").classed(\"hide\",false);\n            pauseCases();\n        });\n\n    const playCases = () => {\n        svg.call(Layout.zoom.scaleTo, 0.5);\n        thisCaseOrder = d3.select(\"#nRadius\").node().value;\n        if (+thisCaseOrder === (+cases.length - 1)) thisCaseOrder = 0;\n\n        playCasesNow = setInterval(function() {\n            thisCaseId = cases[thisCaseOrder];\n            if (thisCaseId !== undefined) {\n                Layout.updateRadius(cases, thisCaseOrder);\n                thisCaseOrder++;\n            } else {\n                thisCaseOrder = 0;\n            }\n        }, 200);\n    };\n    const pauseCases = () => {\n        clearInterval(playCasesNow);\n    };\n\n    // Case slider to highlight nodes by id\n    // https://bl.ocks.org/d3noob/c4b31a539304c29767a56c2373eeed79/9d18fc47e580d8c940ffffea1179e77e62647e36\n\n    // When the input range changes highlight the circle\n    d3.select(\"#nRadius\").on(\"input\", function() {\n        Layout.updateRadius(cases, +this.value);\n    });\n    d3.select(\"#nRadius\").property(\"max\", cases.length-1);\n    Layout.updateRadius(cases, cases.length-1);\n\n\n    // Draw cases by time\n    Draw.TimeLine(xScale, yScale);\n\n    // Draw counties map\n    Draw.CountiesMap(geoCounties, geojsonFeatures);\n\n    // Draw nodes and links\n    Draw.NodesAndLinks(graph, cases, simulation, positioning);\n\n    // Define the secondary simulation, for county groups\n    Draw.CirclesPacks(geoCounties, graph.nodes, cases);\n\n    // Color the legend for counties\n    Layout.colorStatus();\n\n    // Hide case labels first\n    Layout.hideLabels(1);\n\n\n    // Zoom to latest case, when loading spinner stops\n    setTimeout(function() {\n        simulation.stop();\n        spinner.stop();\n        d3.select(\"tooltip_div\").classed(\"tooltip-abs\", true);\n        d3.select(\"#CO-\" + d3.max(cases))\n            .attr(\"r\", d => 2 * d.r)\n            .dispatch('mouseover');\n    }, 5000);\n   \n};\n\n}).call(this);","export const infoHtml = (language) => {\n    return language === \"ro\"\n    ? \"<strong>Relația cazurilor confirmate</strong>.<br/>Situaţia până la data în care s-au raportat oficial aceste informaţii.<br/><br/>Dați click în afara cercului pentru a deselecta.\"\n    : \"<strong>Relationship between confirmed cases</strong>.<br/>The status until the date this information has been officially reported.<br/><br/>Click outside the circle to clear the selection.\";\n}\n\nexport const status = (language) => {\n    return language === \"ro\"\n        ? \"Stare\"\n        : \"Status\";\n};\n\nexport const county = (language) => {\n    return language === \"ro\"\n        ? \"Județ\"\n        : \"County\";\n};\n\nexport const gender = (language) => {\n    return language === \"ro\"\n        ? \"Gen\"\n        : \"Gender\";\n};\n\nexport const age = (language) => {\n    return language === \"ro\"\n        ? \"Vârstă\"\n        : \"Age\";\n};"],"names":["margin","width","window","innerWidth","height","innerHeight","svg_width","svg_height","projection","d3","geoAlbers","center","rotate","parallels","scale","translate","locale","geoPath","timeFormatLocale","dateTime","date","time","periods","days","shortDays","months","shortMonths","formatMillisecond","format","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","multiFormat","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeWeek","timeYear","idToTargetNodesFnc","nodes","nest","key","d","properties","source_no","rollup","v","length","object","drag","simulation","positioning","on","event","active","alphaTarget","restart","fx","x","fy","y","linkArc","r","Math","hypot","target","source","update","idToNode","links","labels","xScale","yScale","attr","start","name","end","dayOrder","join","statusColor","language","scaleOrdinal","domain","countyColor","genderColor","ageColor","scaleQuantile","range","schemeSpectral","colorStatus","select","selectAll","transition","duration","status","showLegend","createLegend","colorScale","vbHeight","legendClass","legendTitle","legend","append","categoryLegend","legendColor","shape","symbol","type","symbolCircle","size","shapePadding","title","titleWidth","labelFormat","labelAlign","call","category","classed","updateRadius","cases","nRadius","text","property","dispatch","hideLabels","z","zoom","scaleExtent","zoomableGroup","transform","k","resetZoom","scaleTo","fixed","immediate","forEach","pos","Config.projection","longitude","latitude","t","ease","easeElastic","period","Simulation.update","showMapClusters","graph","stop","style","Simulation.drag","tooltip_div","tooltipHTML","undefined","node","value","cazulLabel","ro","en","maleLabel","femaleLabel","unspecLabel","statusLabel","releasedLabel","confirmedLabel","deceasedLabel","confdateLabel","recoverydateLabel","infectionCountryLabel","detailsLabel","aiciLabel","countyInfo","gender","age","county","statusInfo","diagnosticDateInfo","diagnostic_date","healingDateInfo","healing_date","countyOfInfectionInfo","country_of_infection","referenceInfo","reference","case_no","highlightSearchedId","caseId","hovered","hover","ancestors","map","CirclesPacks","geoCounties","graphNodes","root","pack","packGroup","groupedByCountySource","sec_simulation","bubbles","en_bubbles","bubble_labels","en_bubble_labels","counties_list","countyCasesData","forceSimulation","force","forceCollide","radius","strength","forceAttract","foc_x","foc_y","entries","push","id","parent","filter","sort","a","b","source_case","values","stratify","parentId","sum","Config.svg_width","Config.svg_height","padding","eachBefore","relx","rely","data","i","j","ref","descendants","enter","each","this","Tooltip.hovered","Tooltip.highlightSearchedId","Layout.countyColor","leaves","Layout.hideLabels","ceil","log","alphaMin","alphaDecay","tick","NodesAndLinks","nodesGroup","markerTypes","Array","from","Set","URL","location","toString","exit","remove","left","pageX","top","pageY","indexOf","html","Tooltip.highlight","svg","stopPropagation","zoomIdentity","mouse","Layout.panTo","clone","lower","sources","casesData","geoData","layer","geojsonFeatures","playCasesNow","thisCaseId","thisCaseOrder","legendStatus","infoStatus","searchStatus","countiesCentroids","countiesSource","spinner","opts","lines","corners","color","opacity","direction","speed","trail","fps","zIndex","className","shadow","hwaccel","position","document","getElementById","promises","json","Promise","all","then","Spinner","spin","setupGraph","setTimeout","drawGraph","catch","error","console","concat","topojson","feature","objects","features","geometries","set","lat","lon","centroid","fitSize","parseTime","timeParse","formattedData","idToTargetNodes","rScale","scaleLinear","max","Object","get","getTime","infected_persons","valuesArr","valuesPerDay","Data.formatNodes","Layout.createLegend","Layout.statusColor","Language.status","Language.county","Layout.genderColor","Language.gender","Layout.ageColor","Language.age","scaleTime","extent","dict","n","Data.idToNodeFnc","forceLink","forceCenter","forceManyBody","forceX","forceY","Simulation.graphSimulation","Layout.zoom","scaleBy","Layout.resetZoom","Layout.showMap","Layout.showMapClusters","alpha","Layout.showGraph","Layout.showArcs","Layout.colorStatus","includes","Language.infoHtml","Tooltip.toggleInfo","playCases","pauseCases","setInterval","Layout.updateRadius","clearInterval","timeGraph","axisBottom","ticks","tickFormat","Config.multiFormat","axisLeft","Draw.TimeLine","thisMapPath","Draw.CountiesMap","Draw.NodesAndLinks","Draw.CirclesPacks"],"mappings":"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"}